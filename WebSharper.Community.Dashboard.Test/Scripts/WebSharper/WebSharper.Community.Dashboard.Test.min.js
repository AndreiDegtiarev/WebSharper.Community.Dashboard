(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F;a=window.WebSharper=window.WebSharper||{};b=a.Community=a.Community||{};c=b.Dashboard=b.Dashboard||{};d=c.Test=c.Test||{};e=d.AppModel=d.AppModel||{};f=d.AppData=d.AppData||{};g=d.Client=d.Client||{};h=window.IntelliFactory;i=h&&h.Runtime;j=c&&c.Worker;k=c&&c.RandomRunner;l=c&&c.OpenWeatherRunner;m=c&&c.TextBoxRenderer;n=c&&c.ChartRenderer;o=a&&a.Operators;p=a&&a.List;q=c&&c.Dashboard;r=b&&b.Panel;s=r&&r.PanelContainer;t=r&&r.LayoutManagers;u=a&&a.UI;v=u&&u.Next;w=v&&v.AttrModule;x=c&&c.DshEditorData;y=v&&v.Var;z=r&&r.Helper;A=r&&r.PanelData;B=c&&c.DshEditorRowData;C=c&&c.DshEditorCellData;D=v&&v.Doc;E=a&&a.Remoting;F=E&&E.AjaxRemotingProvider;e=d.AppModel=i.Class({get_Worker:function(){var G,H,I,J;return this.$==1?(G=this.$0,j.Create(G).WithRunner(G)):this.$==2?(H=this.$0,j.Create(H).WithRenderer(H)):this.$==3?(I=this.$0,j.Create(I).WithRunner(I).WithRenderer(I)):(J=this.$0,j.Create(J).WithRunner(J));}},null,e);e.ToWorker=function(G){return e.FromDataContext(G).get_Worker();};e.FromWorker=function(G){var H;H=G.DataContext;return H instanceof c.RandomRunner?new e({$:0,$0:(k.get_FromPorts())(G)}):H instanceof c.OpenWeatherRunner?new e({$:1,$0:(l.get_FromPorts())(G)}):H instanceof c.TextBoxRenderer?new e({$:2,$0:(m.get_FromPorts())(G)}):H instanceof c.ChartRenderer?new e({$:3,$0:(n.get_FromPorts())(G)}):o.FailWith("AllTypes FromDataContext unknown type");};e.FromDataContext=function(G){return G instanceof k?new e({$:0,$0:G}):G instanceof l?new e({$:1,$0:G}):G instanceof m?new e({$:2,$0:G}):G instanceof n?new e({$:3,$0:G}):o.FailWith("AllTypes FromDataContext unknown type");};f=d.AppData=i.Class({Recreate:function(G){var H,I;G.Restore(this.PanelData,(H=function(J,K){return[J,K.get_Worker()];},p.map(function(J){return H(J[0],J[1]);},this.Events)),(I=function(J,K,L){return[J,K,L.get_Worker()];},p.map(function(J){return I(J[0],J[1],J[2]);},this.Widgets)),this.DshEditorData);}},null,f);f.get_CreateDashboard=function(){var G,H;function I(K){var L;H(K,(L=G.Factory,function(M){L.RegisterEvent(M);}));}function J(K){var L;H(K,(L=G.Factory,function(M){L.RegisterWidget(M);}));}G=q.Create(s.get_Create().WithLayoutManager(t.FloatingPanelLayoutManager(5)).WithWidth(800).WithHeight(420).WithAttributes([w.Style("border","1px solid white")]));H=function(K,L){return L(e.ToWorker(K));};I(l.Create("London",""));I(k.Create(50,5));J(m.get_Create());J(n.Create(300,100,50));return G;};f.Create=function(G){return f.New(p.map(function(H){return H.get_PanelData();},p.ofSeq(G.PanelContainer.PanelItems)),p.map(function(H){return[H.Worker.Key,e.FromWorker(H.Worker)];},p.ofSeq(G.Data.EventItems)),p.map(function(H){return[H.Widget.Key,H.Panel,e.FromWorker(H.Widget)];},p.ofSeq(G.Data.WidgetItems)),x.Create(G.Editor));};f.New=function(G,H,I,J){return new f({PanelData:G,Events:H,Widgets:I,DshEditorData:J});};g.Main=function(){var G,H,I;G=y.Create$1("D:\\Dashboard.cfg");H=f.get_CreateDashboard();I=function(){var J,K,L,M,N;f.Create(H);J=z.UniqueKey();K=new e({$:0,$0:k.Create(100,50)});L=K.get_Worker();M=new e({$:2,$0:m.get_Create()});N=M.get_Worker();f.New(p.ofArray([A.Create(J,0,0,p.T.Empty)]),p.ofArray([[L.Key,K]]),p.ofArray([[N.Key,J,M]]),x.New(p.ofArray([B.New(p.ofArray([C.New(L.InPorts.get_Item(0).Key,L.OutPorts.get_Item(0).Key,L.Key),C.New(N.InPorts.get_Item(0).Key,"",N.Key)]))]))).Recreate(H);};return D.Element("div",[],[H.get_Render(),D.TextNode("File name"),D.Input([],G),z.TxtIconNormal("file_upload","Upload",function(){(new F.New()).Send("WebSharper.Community.Dashboard.Test:WebSharper.Community.Dashboard.Test.Server.SaveToFile:-1567987319",[G.c,f.Create(H)]);}),z.TxtIconNormal("file_download","Download",function(){(new F.New()).Sync("WebSharper.Community.Dashboard.Test:WebSharper.Community.Dashboard.Test.Server.LoadFromFile:-133840407",[G.c]).Recreate(H);}),z.TxtIconNormal("build","Sample configuration",function(){I();})]);};}());
