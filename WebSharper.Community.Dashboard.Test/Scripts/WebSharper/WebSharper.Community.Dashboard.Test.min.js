(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I;a=window;b=a.WebSharper=a.WebSharper||{};c=b.Community=b.Community||{};d=c.Dashboard=c.Dashboard||{};e=d.Test=d.Test||{};f=e.AppModel=e.AppModel||{};g=e.Client=e.Client||{};h=a.WebSharper$Community$Dashboard$Test_JsonDecoder=a.WebSharper$Community$Dashboard$Test_JsonDecoder||{};i=d&&d.AppModelLib;j=d&&d.RuleEntry;k=d&&d.AppData;l=c&&c.Panel;m=l&&l.Helper;n=d&&d.Events;o=n&&n.RandomEvent;p=d&&d.Widgets;q=p&&p.TextBoxWidget;r=p&&p.ChartWidget;s=b&&b.List;t=l&&l.PanelData;u=d&&d.RuleContainer;v=d&&d.RuleChain;w=d&&d.App;x=b&&b.Remoting;y=x&&x.AjaxRemotingProvider;z=b&&b.UI;A=z&&z.Next;B=A&&A.Doc;C=d&&d.Environment;D=a.console;E=d&&d.MessageBus;F=a.JSON;G=b&&b.Strings;H=b&&b.Json;I=H&&H.Provider;f.FromWorker=function(J){var K;K=i.FromWorker(J);return K==null?null:{$:1,$0:{$:0,$0:K.$0}};};f.ToWorker=function(J){return i.ToWorker(J.$0);};g.Main=function(J){var K,L;function M(){var P,Q,R,S,T,U;function V(W){var X;X=f.ToWorker(W);return[[X.Key,P,W],j.New(X.InPorts.get_Item(0).get_Key(),"",X.Key)];}k.Create(L,f.FromWorker);P=m.UniqueKey();Q={$:0,$0:{$:0,$0:o.get_Create()}};R=f.ToWorker(Q);S=V({$:0,$0:{$:4,$0:q.get_Create()}});T=V({$:0,$0:{$:5,$0:r.get_Create()}});U=s.ofArray([t.Create(P,0,0,s.T.Empty)]);k.New(s.ofArray([["main",s.ofArray([[R.Key,Q]])]]),s.ofArray([["main",U,s.ofArray([S[0],T[0]])]]),s.ofArray([["main",u.New(s.ofArray([v.New(s.ofArray([j.New(R.InPorts.get_Item(0).get_Key(),R.OutPorts.get_Item(0).Key,R.Key),S[1]])),v.New(s.ofArray([j.New(R.InPorts.get_Item(0).get_Key(),R.OutPorts.get_Item(0).Key,R.Key),T[1]]))]))]])).RecreateOnClientEventsRunning(L,function(){return w.PanelContainerCreator();},f.ToWorker);}function N(P){(new y.New()).Send("WebSharper.Community.Dashboard.Test:WebSharper.Community.Dashboard.Test.Server.RecreateOnServer:1430973847",[(new y.New()).Sync("WebSharper.Community.Dashboard.Test:WebSharper.Community.Dashboard.Test.Server.LoadFromFile:960175932",[P])]);K("Server recreated");}function O(P){return B.Element("td",[],P);}C.set_Log(function(P){D.log(P);});E.RunServerRequests();K=C.Log();L=w.CreateDashboard();C.set_UpdateConfiguration(function(P){try{(h.j())(F.parse(P)).RecreateOnClientEventsNotRunning(L,function(){return w.PanelContainerCreator();},f.ToWorker);K("Configuration updated");}catch(Q){K(Q.message);}});return B.Element("div",[],[L.Render(B.Element("div",[],[O(s.ofArray([m.TxtIconNormal("build","Sample configuration",function(){M();})])),O(s.ofArray([m.TxtIconNormal("autorenew","Reload",function(){k.Create(L,f.FromWorker).RecreateOnClientEventsRunning(L,function(){return w.PanelContainerCreator();},f.ToWorker);})])),O(s.ofArray([m.TxtIconNormal("archive","Upload",function(){(new y.New()).Send("WebSharper.Community.Dashboard.Test:WebSharper.Community.Dashboard.Test.Server.SaveToFile:-1517660316",["Default.cfg",k.Create(L,f.FromWorker)]);})])),O(s.ofArray([m.TxtIconNormal("unarchive","Download  and run on client",function(){(new y.New()).Sync("WebSharper.Community.Dashboard.Test:WebSharper.Community.Dashboard.Test.Server.LoadFromFile:960175932",["Default.cfg"]).RecreateOnClientEventsRunning(L,function(){return w.PanelContainerCreator();},f.ToWorker);})])),O(s.ofArray([m.TxtIconNormal("cloud_upload","Download and run on server",function(){N("Default.cfg");})]))]))]).OnAfterRender(function(){try{!G.IsNullOrWhiteSpace(J.ConfigurationName)?N(J.ConfigurationName):null;}catch(P){null;}});};h.j$8=function(){return h._v$8?h._v$8:h._v$8=(I.DecodeUnion(void 0,"$",[[0,[["$0","Item",I.Id(),0]]]]))();};h.j$7=function(){return h._v$7?h._v$7:h._v$7=(I.DecodeUnion(E.Value,"$",[[0,[["$0","Item",I.Id(),0]]],[1,[["$0","Item",I.Id(),0]]],[2,[["$0","Item",I.Id(),0]]],[3,[["$0","Item",I.DecodeTuple([I.Id(),I.DecodeList(I.Id())]),0]]],[4,[["$0","Item",h.j$8,0]]]]))();};h.j$6=function(){return h._v$6?h._v$6:h._v$6=(I.DecodeRecord(E.Message,[["Key",I.Id(),0],["Time",I.DecodeDateTime(),0],["Value",h.j$7,0]]))();};h.j$5=function(){return h._v$5?h._v$5:h._v$5=(I.DecodeRecord(d.InPortData,[["Key",I.Id(),0],["Name",I.Id(),0],["Value",h.j$6,0],["CacheSize",I.Id(),0]]))();};h.j$9=function(){return h._v$9?h._v$9:h._v$9=(I.DecodeRecord(d.OutPort,[["Key",I.Id(),0],["Name",I.Id(),0]]))();};h.j$4=function(){return h._v$4?h._v$4:h._v$4=(I.DecodeRecord(void 0,[["WorkerName",I.Id(),0],["InPorts",I.DecodeList(h.j$5),0],["OutPorts",I.DecodeList(h.j$9),0]]))();};h.j$3=function(){return h._v$3?h._v$3:h._v$3=(I.DecodeRecord(p.ButtonWidget,[["ButtonWidgetData",h.j$4,0]]))();};h.j$10=function(){return h._v$10?h._v$10:h._v$10=(I.DecodeRecord(r,[["ChartWidgetData",h.j$4,0]]))();};h.j$11=function(){return h._v$11?h._v$11:h._v$11=(I.DecodeRecord(q,[["TextBoxWidgetData",h.j$4,0]]))();};h.j$12=function(){return h._v$12?h._v$12:h._v$12=(I.DecodeRecord(n.DatabaseEvent,[["DatabaseEventData",h.j$4,0]]))();};h.j$13=function(){return h._v$13?h._v$13:h._v$13=(I.DecodeRecord(n.OpenWeatherEvent,[["OpenWeatherEventData",h.j$4,0]]))();};h.j$14=function(){return h._v$14?h._v$14:h._v$14=(I.DecodeRecord(n.ClockEvent,[["ClockEventData",h.j$4,0]]))();};h.j$15=function(){return h._v$15?h._v$15:h._v$15=(I.DecodeRecord(o,[["RandomEventData",h.j$4,0]]))();};h.j$2=function(){return h._v$2?h._v$2:h._v$2=(I.DecodeUnion(void 0,"$",[[0,[[null,null,h.j$15]]],[1,[[null,null,h.j$14]]],[2,[[null,null,h.j$13]]],[3,[[null,null,h.j$12]]],[4,[[null,null,h.j$11]]],[5,[[null,null,h.j$10]]],[6,[[null,null,h.j$3]]]]))();};h.j$1=function(){return h._v$1?h._v$1:h._v$1=(I.DecodeUnion(void 0,"$",[[0,[["$0","Item",h.j$2,0]]]]))();};h.j$16=function(){return h._v$16?h._v$16:h._v$16=(I.DecodeRecord(void 0,[["Key",I.Id(),0],["Left",I.Id(),0],["Top",I.Id(),0],["Children",I.DecodeList(h.j$16),0]]))();};h.j$18=function(){return h._v$18?h._v$18:h._v$18=(I.DecodeRecord(void 0,[["RuleChain",I.DecodeList(I.Id()),0]]))();};h.j$17=function(){return h._v$17?h._v$17:h._v$17=(I.DecodeRecord(u,[["RuleContainer",I.DecodeList(h.j$18),0]]))();};h.j=function(){return h._v?h._v:h._v=(I.DecodeRecord(k,[["Events",I.DecodeList(I.DecodeTuple([I.Id(),I.DecodeList(I.DecodeTuple([I.Id(),h.j$1]))])),0],["Widgets",I.DecodeList(I.DecodeTuple([I.Id(),I.DecodeList(h.j$16),I.DecodeList(I.DecodeTuple([I.Id(),I.Id(),h.j$1]))])),0],["Rules",I.DecodeList(I.DecodeTuple([I.Id(),h.j$17])),0]]))();};}());
