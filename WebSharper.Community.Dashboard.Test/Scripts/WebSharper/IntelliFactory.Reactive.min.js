(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;a=window.IntelliFactory=window.IntelliFactory||{};b=a.Reactive=a.Reactive||{};c=b.Disposable=b.Disposable||{};d=b.Observer=b.Observer||{};e=b.HotStream=b.HotStream||{};f=b.Reactive=b.Reactive||{};g=f.Reactive=f.Reactive||{};h=window.StartupCode$IntelliFactory_Reactive$Reactive=window.StartupCode$IntelliFactory_Reactive$Reactive||{};i=a&&a.Runtime;j=window.WebSharper;k=j&&j.Control;l=k&&k.FSharpEvent;m=j&&j.Util;n=j&&j.List;o=j&&j.Collections;p=o&&o.Dictionary;q=j&&j.Seq;c.New=function(r){return{Dispose:function(){return r();}};};d.New=function(r,s){return{OnNext:r,OnCompleted:function(){return s();},OnError:function(){return null;}};};e=b.HotStream=i.Class({Trigger:function(r){this.Latest[0]={$:1,$0:r};this.Event.event.Trigger(r);},Subscribe:function(r){this.Latest[0]!=null?r.OnNext(this.Latest[0].$0):void 0;return this.Event.event.Subscribe(r);}},null,e);e.New$1=function(r){return e.New([{$:1,$0:r}],new l.New());};e.New$2=function(){return e.New([null],new l.New());};e.New=function(r,s){return new e({Latest:r,Event:s});};g=f.Reactive=i.Class({Sequence:function(r){return f.Sequence(r);},Drop:function(r,s){return f.Drop(r,s);},Aggregate:function(r,s,t){return f.Aggregate(r,s,function(u,v){return(t(u))(v);});},Heat:function(r){return f.Heat(r);},CombineLatest:function(r,s,t){return f.CombineLatest(r,s,function(u,v){return(t(u))(v);});},CollectLatest:function(r){return f.CollectLatest(r);},SelectMany:function(r){return f.SelectMany(r);},Switch:function(r){return f.Switch(r);},Merge:function(r,s){return f.Merge(r,s);},Concat:function(r,s){return f.Concat(r,s);},Where:function(r,s){return f.Where(r,s);},Choose:function(r,s){return f.Choose(r,s);},Select:function(r,s){return f.Select(r,s);},Never:function(){return f.Never();},Return:function(r){return f.Return(r);}},null,g);g.New=i.Ctor(function(){},g);f.Default=function(){h.$cctor();return h.Default;};f.Heat=function(r){var s;s=e.New$2();r.Subscribe(m.observer(function(t){s.Trigger(t);}));return s;};f.Sequence=function(r){function s(t){return t.$==1?f.CombineLatest(t.$0,s(t.$1),function(u,v){return new n.T({$:1,$0:u,$1:v});}):f.Return(n.T.Empty);}return f.Select(s(n.ofSeq(r)),window.id);};f.CollectLatest=function(r){return{Subscribe:function(s){var t,u;t=new p.New$5();u=[0];return r.Subscribe(m.observer(function(v){var w;u[0]++;w=u[0];v.Subscribe(m.observer(function(x){t.set_Item(w,x);s.OnNext(q.delay(function(){return q.map(function(y){return y.V;},t);}));}));}));}};};f.Aggregate=function(r,s,t){return{Subscribe:function(u){var v;v=[s];return r.Subscribe(m.observer(function(w){v[0]=t(v[0],w);u.OnNext(v[0]);}));}};};f.SelectMany=function(r){return{Subscribe:function(s){var t,u;t=[function(){}];u=r.Subscribe(m.observer(function(v){var w;w=v.Subscribe(m.observer(function(x){s.OnNext(x);}));t[0]=function(){t[0]();w.Dispose();};}));return c.New(function(){t[0]();u.Dispose();});}};};f.Switch=function(r){return{Subscribe:function(s){var t,u;t=[0];u=[null];return r.Subscribe(m.observer(function(v){var w;t[0]++;u[0]!=null?u[0].$0.Dispose():void 0;w=t[0];u[0]={$:1,$0:v.Subscribe(m.observer(function(x){if(w===t[0])s.OnNext(x);}))};}));}};};f.CombineLast=function(r,s,t){return{Subscribe:function(u){var v,w,x,y,z;v=[];w=[];x=function(){if(v.length>0&&w.length>0)u.OnNext(t(v.shift(),w.shift()));};y=r.Subscribe(d.New(function(A){v.push(A);x();},function(){}));z=s.Subscribe(d.New(function(A){w.push(A);x();},function(){}));return c.New(function(){y.Dispose();z.Dispose();});}};};f.CombineLatest=function(r,s,t){return{Subscribe:function(u){var v,w,x,y,z;v=[null];w=[null];x=function(){var A,B;A=v[0];B=w[0];A!=null&&A.$==1?B!=null&&B.$==1?u.OnNext(t(A.$0,B.$0)):void 0:void 0;};y=r.Subscribe(d.New(function(A){v[0]={$:1,$0:A};x();},function(){}));z=s.Subscribe(d.New(function(A){w[0]={$:1,$0:A};x();},function(){}));return c.New(function(){y.Dispose();z.Dispose();});}};};f.Range=function(r,s){return{Subscribe:function(t){var u,v;for(u=r,v=r+s;u<=v;u++)t.OnNext(u);return c.New(function(){});}};};f.Concat=function(r,s){return{Subscribe:function(t){var u,v;u=[null];v=r.Subscribe(d.New(function(w){t.OnNext(w);},function(){u[0]={$:1,$0:s.Subscribe(t)};}));return c.New(function(){u[0]!=null?u[0].$0.Dispose():void 0;v.Dispose();});}};};f.Merge=function(r,s){return{Subscribe:function(t){var u,v,w,x;u=[false];v=[false];w=r.Subscribe(d.New(function(y){t.OnNext(y);},function(){u[0]=true;u[0]&&v[0]?t.OnCompleted():void 0;}));x=s.Subscribe(d.New(function(y){t.OnNext(y);},function(){v[0]=true;u[0]&&v[0]?t.OnCompleted():void 0;}));return c.New(function(){w.Dispose();x.Dispose();});}};};f.Drop=function(r,s){return{Subscribe:function(t){var u;u=[0];return r.Subscribe(m.observer(function(v){u[0]++;u[0]>s?t.OnNext(v):void 0;}));}};};f.Choose=function(r,s){return{Subscribe:function(t){return r.Subscribe(m.observer(function(u){var v;v=s(u);v==null?void 0:t.OnNext(v.$0);}));}};};f.Where=function(r,s){return{Subscribe:function(t){return r.Subscribe(m.observer(function(u){if(s(u))t.OnNext(u);}));}};};f.Select=function(r,s){return{Subscribe:function(t){return r.Subscribe(m.observer(function(u){t.OnNext(s(u));}));}};};f.Never=function(){return{Subscribe:function(){return c.New(function(){});}};};f.Return=function(r){return{Subscribe:function(s){s.OnNext(r);s.OnCompleted();return c.New(function(){});}};};h.$cctor=i.Cctor(function(){h.Default=new g.New();h.$cctor=window.ignore;});}());
