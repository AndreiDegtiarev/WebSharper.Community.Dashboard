(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I;a=window;b=a.WebSharper=a.WebSharper||{};c=b.Community=b.Community||{};d=c.Dashboard=c.Dashboard||{};e=d.Test=d.Test||{};f=e.AppModel=e.AppModel||{};g=e.Client=e.Client||{};h=a.WebSharper$Community$Dashboard$Test_JsonDecoder=a.WebSharper$Community$Dashboard$Test_JsonDecoder||{};i=d&&d.AppModelLib;j=b&&b.Strings;k=d&&d.RuleEntry;l=d&&d.AppData;m=c&&c.Panel;n=m&&m.Helper;o=d&&d.Events;p=o&&o.RandomEvent;q=d&&d.Widgets;r=q&&q.TextBoxWidget;s=q&&q.ChartWidget;t=q&&q.GaugeWidget;u=b&&b.List;v=m&&m.PanelData;w=d&&d.RuleContainer;x=d&&d.RuleChain;y=d&&d.App;z=b&&b.Remoting;A=z&&z.AjaxRemotingProvider;B=b&&b.UI;C=B&&B.Doc;D=d&&d.Environment;E=a.console;F=d&&d.MessageBus;G=a.JSON;H=b&&b.ClientSideJson;I=H&&H.Provider;f.FromWorker=function(J){var K;K=i.FromWorker(J);return K==null?null:{$:1,$0:{$:0,$0:K.$0}};};f.ToWorker=function(J){return i.ToWorker(J.$0);};g.Main$97$31=function(J,K){return function(){try{!j.IsNullOrWhiteSpace(J.ConfigurationName)?K(J.ConfigurationName):null;}catch(L){null;}};};g.Main=function(J){var K,L;function M(){var P,Q,R,S,T,U,V;function W(X){var Y;Y=f.ToWorker(X);return[[Y.Key,P,X],k.New(Y.InPorts.get_Item(0).get_Key(),"",Y.Key)];}l.Create(L,f.FromWorker);P=n.UniqueKey();Q={$:0,$0:{$:0,$0:p.get_Create()}};R=f.ToWorker(Q);S=W({$:0,$0:{$:4,$0:r.get_Create()}});T=W({$:0,$0:{$:5,$0:s.get_Create()}});U=W({$:0,$0:{$:7,$0:t.get_Create()}});V=u.ofArray([v.Create(P,0,0,u.T.Empty)]);l.New(u.ofArray([["main",u.ofArray([[R.Key,Q]])]]),u.ofArray([["main",V,u.ofArray([S[0],T[0],U[0]])]]),u.ofArray([["main",w.New(u.ofArray([x.New(u.ofArray([k.New(R.InPorts.get_Item(0).get_Key(),R.OutPorts.get_Item(0).Key,R.Key),S[1]])),x.New(u.ofArray([k.New(R.InPorts.get_Item(0).get_Key(),R.OutPorts.get_Item(0).Key,R.Key),T[1]])),x.New(u.ofArray([k.New(R.InPorts.get_Item(0).get_Key(),R.OutPorts.get_Item(0).Key,R.Key),U[1]]))]))]])).RecreateOnClientEventsRunning(L,function(){return y.PanelContainerCreator();},f.ToWorker);}function N(P){var Q;Q=(new A.New()).Sync("WebSharper.Community.Dashboard.Test:WebSharper.Community.Dashboard.Test.Server.LoadFromFile:861449976",[P]);(new A.New()).Send("WebSharper.Community.Dashboard.Test:WebSharper.Community.Dashboard.Test.Server.RecreateOnServer:1430973847",[Q]);K("Server recreated");}function O(P){return C.Element("td",[],P);}D.set_Log(function(P){E.log(P);});F.RunServerRequests();K=D.Log();L=y.CreateDashboard();D.set_UpdateConfiguration(function(P){try{(h.j())(G.parse(P)).RecreateOnClientEventsNotRunning(L,function(){return y.PanelContainerCreator();},f.ToWorker);K("Configuration updated");}catch(Q){K(Q.message);}});return C.Element("div",[],[L.Render(C.Element("div",[],[O(u.ofArray([n.TxtIconNormal("build","Sample configuration",function(){M();})])),O(u.ofArray([n.TxtIconNormal("autorenew","Refresh",function(){l.Create(L,f.FromWorker).RecreateOnClientEventsRunning(L,function(){return y.PanelContainerCreator();},f.ToWorker);})])),O(u.ofArray([n.TxtIconNormal("archive","Upload",function(){var P;P=l.Create(L,f.FromWorker);(new A.New()).Send("WebSharper.Community.Dashboard.Test:WebSharper.Community.Dashboard.Test.Server.SaveToFile:-1624398440",["Default",P]);})])),O(u.ofArray([n.TxtIconNormal("unarchive","Download  and run on client",function(){(new A.New()).Sync("WebSharper.Community.Dashboard.Test:WebSharper.Community.Dashboard.Test.Server.LoadFromFile:861449976",["Default"]).RecreateOnClientEventsRunning(L,function(){return y.PanelContainerCreator();},f.ToWorker);})])),O(u.ofArray([n.TxtIconNormal("cloud_upload","Download and run on server",function(){N("Default");})]))]))]).OnAfterRender(function(){try{!j.IsNullOrWhiteSpace(J.ConfigurationName)?N(J.ConfigurationName):null;}catch(P){null;}});};h.j$8=function(){return h._v$8?h._v$8:h._v$8=(I.DecodeUnion(void 0,"$",[[0,[["$0","Item",I.Id(),0]]]]))();};h.j$7=function(){return h._v$7?h._v$7:h._v$7=(I.DecodeUnion(F.Value,"$",[[0,[["$0","Item",I.Id(),0]]],[1,[["$0","Item",I.Id(),0]]],[2,[["$0","Item",I.Id(),0]]],[3,[["$0","Item",I.DecodeTuple([I.Id(),I.DecodeList(I.Id())]),0]]],[4,[["$0","Item",h.j$8,0]]]]))();};h.j$6=function(){return h._v$6?h._v$6:h._v$6=(I.DecodeRecord(F.Message,[["Key",I.Id(),0],["Time",I.DecodeDateTime(),0],["Value",h.j$7,0]]))();};h.j$5=function(){return h._v$5?h._v$5:h._v$5=(I.DecodeRecord(d.InPortData,[["Key",I.Id(),0],["Name",I.Id(),0],["Value",h.j$6,0],["CacheSize",I.Id(),0]]))();};h.j$9=function(){return h._v$9?h._v$9:h._v$9=(I.DecodeRecord(d.OutPort,[["Key",I.Id(),0],["Name",I.Id(),0]]))();};h.j$4=function(){return h._v$4?h._v$4:h._v$4=(I.DecodeRecord(void 0,[["WorkerName",I.Id(),0],["InPorts",I.DecodeList(h.j$5),0],["OutPorts",I.DecodeList(h.j$9),0]]))();};h.j$3=function(){return h._v$3?h._v$3:h._v$3=(I.DecodeRecord(t,[["GaugeWidgetData",h.j$4,0]]))();};h.j$10=function(){return h._v$10?h._v$10:h._v$10=(I.DecodeRecord(q.ButtonWidget,[["ButtonWidgetData",h.j$4,0]]))();};h.j$11=function(){return h._v$11?h._v$11:h._v$11=(I.DecodeRecord(s,[["ChartWidgetData",h.j$4,0]]))();};h.j$12=function(){return h._v$12?h._v$12:h._v$12=(I.DecodeRecord(r,[["TextBoxWidgetData",h.j$4,0]]))();};h.j$13=function(){return h._v$13?h._v$13:h._v$13=(I.DecodeRecord(o.DatabaseEvent,[["DatabaseEventData",h.j$4,0]]))();};h.j$14=function(){return h._v$14?h._v$14:h._v$14=(I.DecodeRecord(o.OpenWeatherEvent,[["OpenWeatherEventData",h.j$4,0]]))();};h.j$15=function(){return h._v$15?h._v$15:h._v$15=(I.DecodeRecord(o.ClockEvent,[["ClockEventData",h.j$4,0]]))();};h.j$16=function(){return h._v$16?h._v$16:h._v$16=(I.DecodeRecord(p,[["RandomEventData",h.j$4,0]]))();};h.j$2=function(){return h._v$2?h._v$2:h._v$2=(I.DecodeUnion(void 0,"$",[[0,[[null,null,h.j$16]]],[1,[[null,null,h.j$15]]],[2,[[null,null,h.j$14]]],[3,[[null,null,h.j$13]]],[4,[[null,null,h.j$12]]],[5,[[null,null,h.j$11]]],[6,[[null,null,h.j$10]]],[7,[[null,null,h.j$3]]]]))();};h.j$1=function(){return h._v$1?h._v$1:h._v$1=(I.DecodeUnion(void 0,"$",[[0,[["$0","Item",h.j$2,0]]]]))();};h.j$17=function(){return h._v$17?h._v$17:h._v$17=(I.DecodeRecord(void 0,[["Key",I.Id(),0],["Left",I.Id(),0],["Top",I.Id(),0],["Children",I.DecodeList(h.j$17),0]]))();};h.j$19=function(){return h._v$19?h._v$19:h._v$19=(I.DecodeRecord(void 0,[["RuleChain",I.DecodeList(I.Id()),0]]))();};h.j$18=function(){return h._v$18?h._v$18:h._v$18=(I.DecodeRecord(w,[["RuleContainer",I.DecodeList(h.j$19),0]]))();};h.j=function(){return h._v?h._v:h._v=(I.DecodeRecord(l,[["Events",I.DecodeList(I.DecodeTuple([I.Id(),I.DecodeList(I.DecodeTuple([I.Id(),h.j$1]))])),0],["Widgets",I.DecodeList(I.DecodeTuple([I.Id(),I.DecodeList(h.j$17),I.DecodeList(I.DecodeTuple([I.Id(),I.Id(),h.j$1]))])),0],["Rules",I.DecodeList(I.DecodeTuple([I.Id(),h.j$18])),0]]))();};}());
