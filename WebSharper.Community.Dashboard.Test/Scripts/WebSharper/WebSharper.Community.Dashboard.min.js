(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M;a=window;b=a.WebSharper=a.WebSharper||{};c=b.Community=b.Community||{};d=c.Dashboard=c.Dashboard||{};e=d.IInPortNumber=d.IInPortNumber||{};f=d.IOutPortNumber=d.IOutPortNumber||{};g=d.Sources=d.Sources||{};h=d.Widgets=d.Widgets||{};i=d.SourceItem=d.SourceItem||{};j=d.ReceiverItem=d.ReceiverItem||{};k=d.Dashboard=d.Dashboard||{};l=a.IntelliFactory;m=l&&l.Runtime;n=b&&b.Util;o=b&&b.Control;p=o&&o.FSharpEvent;q=b&&b.Random;r=b&&b.Concurrency;s=b&&b.List;t=b&&b.Seq;u=b&&b.Operators;v=b&&b.Charting;w=v&&v.Chart;x=v&&v.Pervasives;y=v&&v.Renderers;z=y&&y.ChartJs;A=b&&b.UI;B=A&&A.Next;C=B&&B.Var;D=B&&B.AttrProxy;E=B&&B.Doc;F=B&&B.Key;G=c&&c.Panel;H=G&&G.PanelContainer;I=G&&G.LayoutManagers;J=B&&B.AttrModule;K=G&&G.Panel;L=G&&G.TitleButton;M=B&&B.ListModel;e=d.IInPortNumber=m.Class({get_Callback:function(){return this.callback;},WebSharper_Community_Dashboard_IInPort$get_Name:function(){return this.name;}},null,e);e.New=m.Ctor(function(N,O){this.name=N;this.callback=O;},e);f=d.IOutPortNumber=m.Class({Trigger:function(N){this.event.event.Trigger(N);},WebSharper_Community_Dashboard_IOutPort$Connect:function(N){n.addListener(this.event.event,N.get_Callback());},WebSharper_Community_Dashboard_IOutPort$IsCompatible:function(N){return N instanceof e;},WebSharper_Community_Dashboard_IOutPort$get_Name:function(){return this.name;}},null,f);f.New=m.Ctor(function(N){this.name=N;this.event=new p.New();},f);g.RandomValueSource=function(N,O){var P;P=new f.New("Random value");return{WebSharper_Community_Dashboard_ISource$Run:function(){var Q,R;Q=new q.New();R=r.Delay(function(){var S;S=r.Delay(function(){var T;T=r.Sleep(600);return r.Bind(T,function(){var U;U=a.Math.random()*O+N;P.Trigger(U);return r.Return(null);});});return r.While(function(){return true;},S);});return r.Start(R,null);},WebSharper_Community_Dashboard_ISource$get_OutPorts:function(){return s.ofArray([P]);}};};h.chart=function(N,O,P){var Q,R,S,T,U,V;Q=s.ofSeq(t.delay(function(){return t.map(function(){return 0;},u.range(0,P-1));}));R=(S=[],(T=function(W){S.push(W);},function(W){t.iter(T,W);}(Q),S));U=w.Line(Q).__WithFillColor(new x.Color({$:2,$0:"white"}));V=new e.New("in Value",function(W){var X,Y;R.push(W);R.length>P?X=R.shift():void 0;Y=function(Z,_0){return U.__UpdateData(Z,function(){return _0;});};(function(Z){t.iteri(Y,Z);}(R));});return{WebSharper_Community_Dashboard_IReceiver$Render:function(){return z.Render$8(U,{$:1,$0:{$:0,$0:N,$1:O}},null,null);},WebSharper_Community_Dashboard_IReceiver$get_InPorts:function(){return s.ofArray([V]);}};};h.text=function(){var N,O;N=C.Create$1("");O=new e.New("in Value",function(P){var Q,R;Q=(R=P<<0,a.String(R));C.Set(N,Q);});return{WebSharper_Community_Dashboard_IReceiver$Render:function(){var P,Q;P=[D.Create("class","bigvalue")];Q=[E.TextView(N.v)];return E.Element("div",P,Q);},WebSharper_Community_Dashboard_IReceiver$get_InPorts:function(){return s.ofArray([O]);}};};i.Create=function(N,O){return i.New(F.Fresh(),N,O);};i.New=function(N,O,P){return{Key:N,Id:O,Source:P};};j.Create=function(N){return j.New(F.Fresh(),N);};j.New=function(N,O){return{Key:N,Receiver:O};};k=d.Dashboard=m.Class({CreatePanel:function(N,O,P){var Q,R;Q=this;R=H.get_Create().WithLayoutManager(I.StackPanelLayoutManager()).WithAttributes([J.Style("border","1px solid white"),J.Style("display","flex")]);this.PanelContainer.AddPanel(K.get_Create().WithPannelAttrs([J.Style("Width",a.String(O)+"px"),J.Style("position","absolute")]).WithTitleContent(E.TextNode(N)).WithTitleButtons(s.ofArray([L.New("add",function(){}),L.New("edit",function(){}),L.New("clear",function(S){Q.PanelContainer.PanelItems.Remove(Q.PanelContainer.FindPanelItem(S));})])).WithChildPanelContainer(R).WithOnAfterRender(u.DefaultArg(P,function(){})));return R;},RegisterReceiver:function(N,O){this.ReceiverItems.Append(j.Create(O));N.AddPanel(K.get_Create().WithTitle(false).WithPanelContent(O.WebSharper_Community_Dashboard_IReceiver$Render()));},RegisterSource:function(N,O){this.SourceItems.Append(i.Create(N,O));O.WebSharper_Community_Dashboard_ISource$Run();},get_Render:function(){return this.PanelContainer.get_Render();}},null,k);k.Create=function(N){var O,P;return k.New((O=new s.T({$:0}),M.Create(function(Q){return Q.Key;},O)),(P=new s.T({$:0}),M.Create(function(Q){return Q.Key;},P)),N);};k.New=function(N,O,P){return new k({SourceItems:N,ReceiverItems:O,PanelContainer:P});};}());
