(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D;a=window.WebSharper=window.WebSharper||{};b=a.Community=a.Community||{};c=b.Dashboard=b.Dashboard||{};d=c.Test=c.Test||{};e=d.AppModel=d.AppModel||{};f=d.AppData=d.AppData||{};g=d.Client=d.Client||{};h=window.IntelliFactory;i=h&&h.Runtime;j=c&&c.AppModelLib;k=a&&a.Operators;l=a&&a.List;m=a&&a.UI;n=m&&m.Next;o=n&&n.Doc;p=c&&c.MessageBus;q=window.console;r=n&&n.Var;s=c&&c.App;t=c&&c.RuleEntry;u=b&&b.Panel;v=u&&u.Helper;w=c&&c.RandomRunner;x=c&&c.TextBoxRenderer;y=c&&c.ChartRenderer;z=u&&u.PanelData;A=c&&c.RuleContainer;B=c&&c.RuleChain;C=a&&a.Remoting;D=C&&C.AjaxRemotingProvider;e=d.AppModel=i.Class({get_Worker:function(){return this.$0.get_Worker();}},null,e);e.ToWorker=function(E){return e.FromDataContext(E).get_Worker();};e.FromWorker=function(E){var F;F=j.FromWorker(E);return F!=null&&F.$==1?new e({$:0,$0:F.$0}):k.FailWith("AllTypes FromWorker unknown type");};e.FromDataContext=function(E){var F;F=j.FromDataContext(E);return F!=null&&F.$==1?F.$0:k.FailWith("AllTypes FromDataContext unknown type");};f=d.AppData=i.Class({get_RecreateOnServer:function(){var E,F;this.Rules.Reconnect(l.map(function(G){return G.WithStartRunner();},l.append((E=function(G,H){return H.get_Worker();},l.map(function(G){return E(G[0],G[1]);},this.Events)),(F=function(G,H,I){return I.get_Worker();},l.map(function(G){return F(G[0],G[1],G[2]);},this.Widgets)))));},RecreateOnClient:function(E){var F,G;E.Restore(this.PanelData,(F=function(H,I){return[H,I.get_Worker()];},l.map(function(H){return F(H[0],H[1]);},this.Events)),(G=function(H,I,J){return[H,I,J.get_Worker()];},l.map(function(H){return G(H[0],H[1],H[2]);},this.Widgets)),this.Rules);},Recreate:function(E){var F,G;E.Restore(this.PanelData,(F=function(H,I){return[H,I.get_Worker().WithStartRunner()];},l.map(function(H){return F(H[0],H[1]);},this.Events)),(G=function(H,I,J){return[H,I,J.get_Worker()];},l.map(function(H){return G(H[0],H[1],H[2]);},this.Widgets)),this.Rules);}},null,f);f.Create=function(E){var F;F=E.Store(e.FromWorker);return f.New(F[0],F[1],F[2],F[3]);};f.New=function(E,F,G,H){return new f({PanelData:E,Events:F,Widgets:G,Rules:H});};g.Main=function(){var E,F,G;function H(I){return o.Element("td",[],I);}p.set_Log(function(I){q.log(I);});E=r.Create$1("D:\\Dashboard.cfg");F=s.CreateDashboard();G=function(){var I,J,K,L,M;function N(O){var P;P=O.get_Worker();return[[P.Key,I,O],t.New(P.InPorts.get_Item(0).Key,"",P.Key)];}f.Create(F);I=v.UniqueKey();J=new e({$:0,$0:new j({$:0,$0:w.Create(100,50)})});K=J.get_Worker();L=N(new e({$:0,$0:new j({$:2,$0:x.get_Create()})}));M=N(new e({$:0,$0:new j({$:3,$0:y.Create(300,150,50)})}));f.New(l.ofArray([z.Create(I,0,0,l.T.Empty)]),l.ofArray([[K.Key,J]]),l.ofArray([L[0],M[0]]),A.New(l.ofArray([B.New(l.ofArray([t.New(K.InPorts.get_Item(0).Key,K.OutPorts.get_Item(0).Key,K.Key),L[1]])),B.New(l.ofArray([t.New(K.InPorts.get_Item(0).Key,K.OutPorts.get_Item(0).Key,K.Key),M[1]]))]))).Recreate(F);};return o.Element("div",[],[o.Element("table",[],[o.Element("tr",[],[H(l.ofArray([v.TxtIconNormal("build","Sample configuration",function(){G();})])),H(l.ofArray([o.TextNode("File name"),o.Input([],E)])),H(l.ofArray([v.TxtIconNormal("archive","Upload",function(){(new D.New()).Send("WebSharper.Community.Dashboard.Test:WebSharper.Community.Dashboard.Test.Server.SaveToFile:-1567987319",[E.c,f.Create(F)]);})])),H(l.ofArray([v.TxtIconNormal("unarchive","Download  and run on client",function(){(new D.New()).Sync("WebSharper.Community.Dashboard.Test:WebSharper.Community.Dashboard.Test.Server.LoadFromFile:-133840407",[E.c]).Recreate(F);})])),H(l.ofArray([v.TxtIconNormal("cloud_upload","Download and run on server",function(){var I;I=(new D.New()).Sync("WebSharper.Community.Dashboard.Test:WebSharper.Community.Dashboard.Test.Server.LoadFromFile:-133840407",[E.c]);I.RecreateOnClient(F);(new D.New()).Send("WebSharper.Community.Dashboard.Test:WebSharper.Community.Dashboard.Test.Server.RecreateOnServer:-1126735520",[I]);p.RunServerRequests();})]))])]),F.get_Render()]);};}());
