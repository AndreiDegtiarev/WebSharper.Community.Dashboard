(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B;a=window;b=a.WebSharper=a.WebSharper||{};c=b.Data=b.Data||{};d=c.Pervasives=c.Pervasives||{};e=c.WBRuntime=c.WBRuntime||{};f=e.WorldBankCountry=e.WorldBankCountry||{};g=e.WorldBankRuntime=e.WorldBankRuntime||{};h=a.FSharp=a.FSharp||{};i=h.Data=h.Data||{};j=i.Runtime=i.Runtime||{};k=j.WorldBank=j.WorldBank||{};l=k.Indicator=k.Indicator||{};m=c.JSRuntime=c.JSRuntime||{};n=c.TxtRuntime=c.TxtRuntime||{};o=j.IO=j.IO||{};p=b&&b.Strings;q=b&&b.Guid;r=b&&b.Concurrency;s=a.jQuery;t=b&&b.List;u=b&&b.JavaScript;v=u&&u.Pervasives;w=b&&b.Arrays;x=a.IntelliFactory;y=x&&x.Runtime;z=b&&b.Operators;A=a.Array;B=b&&b.Unchecked;d.randomFunctionName=function(){var C;return p.ReplaceChar((C=q.NewGuid(),a.String(C)).toLowerCase(),45,95);};f.New=function(C,D,E){return{Context:C,Code:D,Name:E};};g.AsyncGetIndicator=function(C,D){return r.FromContinuations(function(E,F){var G,H;G=d.randomFunctionName();{s.ajax((H={},H.url=e.worldBankUrl(C.Context,t.ofArray(["countries",C.Code,"indicators",D]),t.ofArray([["date","1900:2050"],["format","jsonp"]])),H.dataType="jsonp",H.jsonp="prefix",H.jsonpCallback="jsonp"+G,H.error=function(I,J,K){return F(a.Error(J+K));},H.success=function(I){return E(v.NewFromSeq(w.choose(function(J){return J.value==null?null:{$:1,$0:[J.date,J.value]};},w.get(I,1)).slice().reverse()));},H));return;}});};g.GetIndicators=a.id;g.GetCountry=function(C,D,E){return f.New(C,D,E);};e.worldBankUrl=function(C,D,E){function F(G,H){return"&"+G+"="+a.encodeURIComponent(H);}return C.serviceUrl+"/"+p.concat("",t.map(function(G){return"/"+a.encodeURIComponent(G);},D))+"?per_page=1000"+p.concat("",t.map(function(G){return F(G[0],G[1]);},E));};l=k.Indicator=y.Class({TryGetValueAt:function(C){var D;D=this[a.String(C)];return D==void 0?null:{$:1,$0:D};}},null,l);m.GetArrayChildByTypeTag=function(C,D,E){var F;F=m.GetArrayChildrenByTypeTag(C,D,E,a.id);return w.length(F)===1?w.get(F,0):z.FailWith("JSON mismatch: Expected single value, but found multiple.");};m.TryGetArrayChildByTypeTag=function(C,D,E,F){var G;G=m.GetArrayChildrenByTypeTag(C,D,E,F);return w.length(G)===1?{$:1,$0:w.get(G,0)}:w.length(G)===0?null:z.FailWith("JSON mismatch: Expected Array with single or no elements.");};m.TryGetValueByTypeTag=function(C,D,E,F){var G;G=m.matchTag(E,C);return G==null?null:{$:1,$0:F(G.$0)};};m.GetArrayChildrenByTypeTag=function(C,D,E,F){return A.isArray(C)?w.map(function(G){return F(a.id(G));},w.choose(function(G){return m.matchTag(E,G);},C)):z.FailWith("JSON mismatch: Expected Array node");};m.matchTag=function(C,D){var E;return D==null?null:B.Equals(typeof D,"boolean")&&C==="Boolean"?{$:1,$0:D}:B.Equals(typeof D,"number")&&C==="Number"?{$:1,$0:D}:B.Equals(typeof D,"string")&&C==="Number"?(E=1*D,a.isNaN(E)?null:{$:1,$0:E}):B.Equals(typeof D,"string")&&C==="String"?{$:1,$0:D}:A.isArray(D)&&C==="Array"?{$:1,$0:D}:B.Equals(typeof D,"object")&&C==="Record"?{$:1,$0:D}:null;};n.AsyncMap=function(C,D){var E;E=null;return r.Delay(function(){return r.Bind(C,function(F){return r.Return(D(F));});});};o.asyncReadTextAtRuntimeWithDesignTimeRules=function(C,D,E,F,G){return o.asyncReadTextAtRuntime(false,C,D,E,F,G);};o.asyncReadTextAtRuntime=function(C,D,E,F,G,H){function I(J,K){var L,M,N,O,P;L=(M=H.toLowerCase(),p.StartsWith(M,"jsonp|")?[H.substring(6),true]:p.StartsWith(M,"json|")?[H.substring(5),false]:[H,false]);N=(O={},O.dataType="json",O.success=function(Q){return J(Q);},O.error=function(Q,R,S){return K(a.Error(S));},O);L[1]?(P=d.randomFunctionName(),N.dataType="jsonp",N.jsonp="prefix",N.jsonpCallback="jsonp"+P):void 0;s.ajax(L[0],N);}return r.FromContinuations(function(J,K,L){return I.apply(null,[J,K,L]);});};}());
