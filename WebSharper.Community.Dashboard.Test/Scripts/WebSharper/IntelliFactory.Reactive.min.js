(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;a=window;b=a.IntelliFactory=a.IntelliFactory||{};c=b.Reactive=b.Reactive||{};d=c.Disposable=c.Disposable||{};e=c.Observer=c.Observer||{};f=c.HotStream=c.HotStream||{};g=c.Reactive=c.Reactive||{};h=g.Reactive=g.Reactive||{};i=a.StartupCode$IntelliFactory_Reactive$Reactive=a.StartupCode$IntelliFactory_Reactive$Reactive||{};j=b&&b.Runtime;k=a.WebSharper;l=k&&k.Control;m=l&&l.FSharpEvent;n=k&&k.Util;o=k&&k.List;p=k&&k.Collections;q=p&&p.Dictionary;r=k&&k.Ref;s=k&&k.Seq;d.New=function(t){return{Dispose:function(){return t();}};};e.New=function(t,u){return{OnError:function(){return null;},OnCompleted:function(){return u();},OnNext:t};};f=c.HotStream=j.Class({Trigger:function(t){this.Latest[0]={$:1,$0:t};this.Event.event.Trigger(t);},Subscribe:function(t){this.Latest[0]!=null?t.OnNext(this.Latest[0].$0):void 0;return this.Event.event.Subscribe(t);}},null,f);f.New$1=function(t){return f.New([{$:1,$0:t}],new m.New());};f.New$2=function(){return f.New([null],new m.New());};f.New=function(t,u){return new f({Latest:t,Event:u});};h=g.Reactive=j.Class({Sequence:function(t){return g.Sequence(t);},Drop:function(t,u){return g.Drop(t,u);},Aggregate:function(t,u,v){return g.Aggregate(t,u,function(w,x){return(v(w))(x);});},Heat:function(t){return g.Heat(t);},CombineLatest:function(t,u,v){return g.CombineLatest(t,u,function(w,x){return(v(w))(x);});},CollectLatest:function(t){return g.CollectLatest(t);},SelectMany:function(t){return g.SelectMany(t);},Switch:function(t){return g.Switch(t);},Merge:function(t,u){return g.Merge(t,u);},Concat:function(t,u){return g.Concat(t,u);},Where:function(t,u){return g.Where(t,u);},Choose:function(t,u){return g.Choose(t,u);},Select:function(t,u){return g.Select(t,u);},Never:function(){return g.Never();},Return:function(t){return g.Return(t);}},null,h);h.New=j.Ctor(function(){},h);g.Default=function(){i.$cctor();return i.Default;};g.Heat=function(t){var u,v;u=f.New$2();v=n.subscribeTo(t,function(w){u.Trigger(w);});return u;};g.Sequence=function(t){function u(v){var w,x,y;return v.$==1?(w=v.$1,(x=v.$0,(y=u(w),g.CombineLatest(x,y,function(z,A){return new o.T({$:1,$0:z,$1:A});})))):g.Return(new o.T({$:0}));}return g.Select(u(o.ofSeq(t)),a.id);};g.CollectLatest=function(t){return{Subscribe:function(u){var v,w;v=new q.New$5();w=[0];return n.subscribeTo(t,function(x){var y,z;r.incr(w);y=w[0];z=n.subscribeTo(x,function(A){v.set_Item(y,A);u.OnNext(s.delay(function(){return s.map(function(B){return B.V;},v);}));});});}};};g.Aggregate=function(t,u,v){return{Subscribe:function(w){var x;x=[u];return n.subscribeTo(t,function(y){x[0]=v(x[0],y);w.OnNext(x[0]);});}};};g.SelectMany=function(t){return{Subscribe:function(u){var v,w;v=[function(){}];w=n.subscribeTo(t,function(x){var y;y=n.subscribeTo(x,function(z){u.OnNext(z);});v[0]=function(){v[0]();y.Dispose();};});return d.New(function(){v[0]();w.Dispose();});}};};g.Switch=function(t){return{Subscribe:function(u){var v,w;v=[0];w=[null];return n.subscribeTo(t,function(x){var y;r.incr(v);w[0]!=null?w[0].$0.Dispose():void 0;y=v[0];w[0]={$:1,$0:n.subscribeTo(x,function(z){if(y===v[0])u.OnNext(z);})};});}};};g.CombineLast=function(t,u,v){return{Subscribe:function(w){var x,y,z,A,B;x=[];y=[];z=function(){if(x.length>0?y.length>0:false)w.OnNext(v(x.shift(),y.shift()));};A=t.Subscribe(e.New(function(C){x.push(C);z();},function(){}));B=u.Subscribe(e.New(function(C){y.push(C);z();},function(){}));return d.New(function(){A.Dispose();B.Dispose();});}};};g.CombineLatest=function(t,u,v){return{Subscribe:function(w){var x,y,z,A,B;x=[null];y=[null];z=function(){var C,D;C=x[0];D=y[0];(C!=null?C.$==1:false)?(D!=null?D.$==1:false)?w.OnNext(v(C.$0,D.$0)):void 0:void 0;};A=t.Subscribe(e.New(function(C){x[0]={$:1,$0:C};z();},function(){}));B=u.Subscribe(e.New(function(C){y[0]={$:1,$0:C};z();},function(){}));return d.New(function(){A.Dispose();B.Dispose();});}};};g.Range=function(t,u){return{Subscribe:function(v){var w,x;for(w=t,x=t+u;w<=x;w++)v.OnNext(w);return d.New(function(){});}};};g.Concat=function(t,u){return{Subscribe:function(v){var w,x;w=[null];x=t.Subscribe(e.New(function(y){v.OnNext(y);},function(){w[0]={$:1,$0:u.Subscribe(v)};}));return d.New(function(){w[0]!=null?w[0].$0.Dispose():void 0;x.Dispose();});}};};g.Merge=function(t,u){return{Subscribe:function(v){var w,x,y,z;w=[false];x=[false];y=t.Subscribe(e.New(function(A){v.OnNext(A);},function(){w[0]=true;(w[0]?x[0]:false)?v.OnCompleted():void 0;}));z=u.Subscribe(e.New(function(A){v.OnNext(A);},function(){x[0]=true;(w[0]?x[0]:false)?v.OnCompleted():void 0;}));return d.New(function(){y.Dispose();z.Dispose();});}};};g.Drop=function(t,u){return{Subscribe:function(v){var w;w=[0];return n.subscribeTo(t,function(x){r.incr(w);w[0]>u?v.OnNext(x):void 0;});}};};g.Choose=function(t,u){return{Subscribe:function(v){return n.subscribeTo(t,function(w){var x;x=u(w);x==null?void 0:v.OnNext(x.$0);});}};};g.Where=function(t,u){return{Subscribe:function(v){return n.subscribeTo(t,function(w){if(u(w))v.OnNext(w);});}};};g.Select=function(t,u){return{Subscribe:function(v){return n.subscribeTo(t,function(w){v.OnNext(u(w));});}};};g.Never=function(){return{Subscribe:function(){return d.New(function(){});}};};g.Return=function(t){return{Subscribe:function(u){u.OnNext(t);u.OnCompleted();return d.New(function(){});}};};i.$cctor=j.Cctor(function(){i.Default=new h.New();i.$cctor=a.ignore;});}());
