(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;a=window;b=a.IntelliFactory=a.IntelliFactory||{};c=b.Reactive=b.Reactive||{};d=c.Disposable=c.Disposable||{};e=c.Observer=c.Observer||{};f=c.HotStream=c.HotStream||{};g=c.Reactive=c.Reactive||{};h=g.Reactive=g.Reactive||{};i=a.StartupCode$IntelliFactory_Reactive$Reactive=a.StartupCode$IntelliFactory_Reactive$Reactive||{};j=b&&b.Runtime;k=a.WebSharper;l=k&&k.Control;m=l&&l.FSharpEvent;n=k&&k.Util;o=k&&k.List;p=k&&k.Collections;q=p&&p.Dictionary;r=k&&k.Seq;d.New=function(s){return{Dispose:function(){return s();}};};e.New=function(s,t){return{OnNext:s,OnCompleted:function(){return t();},OnError:function(){return null;}};};f=c.HotStream=j.Class({Trigger:function(s){this.Latest[0]={$:1,$0:s};this.Event.event.Trigger(s);},Subscribe:function(s){this.Latest[0]!=null?s.OnNext(this.Latest[0].$0):void 0;return this.Event.event.Subscribe(s);}},null,f);f.New$1=function(s){return f.New([{$:1,$0:s}],new m.New());};f.New$2=function(){return f.New([null],new m.New());};f.New=function(s,t){return new f({Latest:s,Event:t});};h=g.Reactive=j.Class({Sequence:function(s){return g.Sequence(s);},Drop:function(s,t){return g.Drop(s,t);},Aggregate:function(s,t,u){return g.Aggregate(s,t,function(v,w){return(u(v))(w);});},Heat:function(s){return g.Heat(s);},CombineLatest:function(s,t,u){return g.CombineLatest(s,t,function(v,w){return(u(v))(w);});},CollectLatest:function(s){return g.CollectLatest(s);},SelectMany:function(s){return g.SelectMany(s);},Switch:function(s){return g.Switch(s);},Merge:function(s,t){return g.Merge(s,t);},Concat:function(s,t){return g.Concat(s,t);},Where:function(s,t){return g.Where(s,t);},Choose:function(s,t){return g.Choose(s,t);},Select:function(s,t){return g.Select(s,t);},Never:function(){return g.Never();},Return:function(s){return g.Return(s);}},null,h);h.New=j.Ctor(function(){},h);g.Default=function(){i.$cctor();return i.Default;};g.Heat=function(s){var t;t=f.New$2();s.Subscribe(n.observer(function(u){t.Trigger(u);}));return t;};g.Sequence=function(s){function t(u){return u.$==1?g.CombineLatest(u.$0,t(u.$1),function(v,w){return new o.T({$:1,$0:v,$1:w});}):g.Return(o.T.Empty);}return g.Select(t(o.ofSeq(s)),a.id);};g.CollectLatest=function(s){return{Subscribe:function(t){var u,v;u=new q.New$5();v=[0];return s.Subscribe(n.observer(function(w){var x;v[0]++;x=v[0];w.Subscribe(n.observer(function(y){u.set_Item(x,y);t.OnNext(r.delay(function(){return r.map(function(z){return z.V;},u);}));}));}));}};};g.Aggregate=function(s,t,u){return{Subscribe:function(v){var w;w=[t];return s.Subscribe(n.observer(function(x){w[0]=u(w[0],x);v.OnNext(w[0]);}));}};};g.SelectMany=function(s){return{Subscribe:function(t){var u,v;u=[a.ignore];v=s.Subscribe(n.observer(function(w){var x;x=w.Subscribe(n.observer(function(y){t.OnNext(y);}));u[0]=function(){u[0]();x.Dispose();};}));return d.New(function(){u[0]();v.Dispose();});}};};g.Switch=function(s){return{Subscribe:function(t){var u,v;u=[0];v=[null];return s.Subscribe(n.observer(function(w){var x;u[0]++;v[0]!=null?v[0].$0.Dispose():void 0;x=u[0];v[0]={$:1,$0:w.Subscribe(n.observer(function(y){if(x===u[0])t.OnNext(y);}))};}));}};};g.CombineLast=function(s,t,u){return{Subscribe:function(v){var w,x,y,z;function A(){if(w.length>0&&x.length>0)v.OnNext(u(w.shift(),x.shift()));}w=[];x=[];y=s.Subscribe(e.New(function(B){w.push(B);A();},a.ignore));z=t.Subscribe(e.New(function(B){x.push(B);A();},a.ignore));return d.New(function(){y.Dispose();z.Dispose();});}};};g.CombineLatest=function(s,t,u){return{Subscribe:function(v){var w,x,y,z;function A(){var B,C;B=w[0];C=x[0];B!=null&&B.$==1?C!=null&&C.$==1?v.OnNext(u(B.$0,C.$0)):void 0:void 0;}w=[null];x=[null];y=s.Subscribe(e.New(function(B){w[0]={$:1,$0:B};A();},a.ignore));z=t.Subscribe(e.New(function(B){x[0]={$:1,$0:B};A();},a.ignore));return d.New(function(){y.Dispose();z.Dispose();});}};};g.Range=function(s,t){return{Subscribe:function(u){var v,w;for(v=s,w=s+t;v<=w;v++)u.OnNext(v);return d.New(a.ignore);}};};g.Concat=function(s,t){return{Subscribe:function(u){var v,w;v=[null];w=s.Subscribe(e.New(function(x){u.OnNext(x);},function(){v[0]={$:1,$0:t.Subscribe(u)};}));return d.New(function(){v[0]!=null?v[0].$0.Dispose():void 0;w.Dispose();});}};};g.Merge=function(s,t){return{Subscribe:function(u){var v,w,x,y;v=[false];w=[false];x=s.Subscribe(e.New(function(z){u.OnNext(z);},function(){v[0]=true;v[0]&&w[0]?u.OnCompleted():void 0;}));y=t.Subscribe(e.New(function(z){u.OnNext(z);},function(){w[0]=true;v[0]&&w[0]?u.OnCompleted():void 0;}));return d.New(function(){x.Dispose();y.Dispose();});}};};g.Drop=function(s,t){return{Subscribe:function(u){var v;v=[0];return s.Subscribe(n.observer(function(w){v[0]++;v[0]>t?u.OnNext(w):void 0;}));}};};g.Choose=function(s,t){return{Subscribe:function(u){return s.Subscribe(n.observer(function(v){var w;w=t(v);w==null?void 0:u.OnNext(w.$0);}));}};};g.Where=function(s,t){return{Subscribe:function(u){return s.Subscribe(n.observer(function(v){if(t(v))u.OnNext(v);}));}};};g.Select=function(s,t){return{Subscribe:function(u){return s.Subscribe(n.observer(function(v){u.OnNext(t(v));}));}};};g.Never=function(){return{Subscribe:function(){return d.New(a.ignore);}};};g.Return=function(s){return{Subscribe:function(t){t.OnNext(s);t.OnCompleted();return d.New(a.ignore);}};};i.$cctor=j.Cctor(function(){i.Default=new h.New();i.$cctor=a.ignore;});}());
