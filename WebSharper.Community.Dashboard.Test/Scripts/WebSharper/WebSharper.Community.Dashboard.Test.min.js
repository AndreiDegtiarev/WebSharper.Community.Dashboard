(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J;a=window;b=a.WebSharper=a.WebSharper||{};c=b.Community=b.Community||{};d=c.Dashboard=c.Dashboard||{};e=d.Test=d.Test||{};f=e.AppModel=e.AppModel||{};g=e.Client=e.Client||{};h=a.WebSharper$Community$Dashboard$Test_JsonDecoder=a.WebSharper$Community$Dashboard$Test_JsonDecoder||{};i=d&&d.AppModelLib;j=d&&d.RuleEntry;k=d&&d.AppData;l=c&&c.Panel;m=l&&l.Helper;n=d&&d.Events;o=n&&n.RandomEvent;p=d&&d.Widgets;q=p&&p.TextBoxWidget;r=p&&p.ChartWidget;s=p&&p.GaugeWidget;t=b&&b.List;u=l&&l.PanelData;v=d&&d.RuleContainer;w=d&&d.RuleChain;x=d&&d.App;y=b&&b.Remoting;z=y&&y.AjaxRemotingProvider;A=b&&b.UI;B=A&&A.Next;C=B&&B.Doc;D=d&&d.Environment;E=a.console;F=d&&d.MessageBus;G=a.JSON;H=b&&b.Strings;I=b&&b.Json;J=I&&I.Provider;f.FromWorker=function(K){var L;L=i.FromWorker(K);return L==null?null:{$:1,$0:{$:0,$0:L.$0}};};f.ToWorker=function(K){return i.ToWorker(K.$0);};g.Main=function(K){var L,M;function N(){var Q,R,S,T,U,V,W;function X(Y){var Z;Z=f.ToWorker(Y);return[[Z.Key,Q,Y],j.New(Z.InPorts.get_Item(0).get_Key(),"",Z.Key)];}k.Create(M,f.FromWorker);Q=m.UniqueKey();R={$:0,$0:{$:0,$0:o.get_Create()}};S=f.ToWorker(R);T=X({$:0,$0:{$:4,$0:q.get_Create()}});U=X({$:0,$0:{$:5,$0:r.get_Create()}});V=X({$:0,$0:{$:7,$0:s.get_Create()}});W=t.ofArray([u.Create(Q,0,0,t.T.Empty)]);k.New(t.ofArray([["main",t.ofArray([[S.Key,R]])]]),t.ofArray([["main",W,t.ofArray([T[0],U[0],V[0]])]]),t.ofArray([["main",v.New(t.ofArray([w.New(t.ofArray([j.New(S.InPorts.get_Item(0).get_Key(),S.OutPorts.get_Item(0).Key,S.Key),T[1]])),w.New(t.ofArray([j.New(S.InPorts.get_Item(0).get_Key(),S.OutPorts.get_Item(0).Key,S.Key),U[1]])),w.New(t.ofArray([j.New(S.InPorts.get_Item(0).get_Key(),S.OutPorts.get_Item(0).Key,S.Key),V[1]]))]))]])).RecreateOnClientEventsRunning(M,function(){return x.PanelContainerCreator();},f.ToWorker);}function O(Q){var R;R=(new z.New()).Sync("WebSharper.Community.Dashboard.Test:WebSharper.Community.Dashboard.Test.Server.LoadFromFile:960175932",[Q]);(new z.New()).Send("WebSharper.Community.Dashboard.Test:WebSharper.Community.Dashboard.Test.Server.RecreateOnServer:1430973847",[R]);L("Server recreated");}function P(Q){return C.Element("td",[],Q);}D.set_Log(function(Q){E.log(Q);});F.RunServerRequests();L=D.Log();M=x.CreateDashboard();D.set_UpdateConfiguration(function(Q){try{(h.j())(G.parse(Q)).RecreateOnClientEventsNotRunning(M,function(){return x.PanelContainerCreator();},f.ToWorker);L("Configuration updated");}catch(R){L(R.message);}});return C.Element("div",[],[M.Render(C.Element("div",[],[P(t.ofArray([m.TxtIconNormal("build","Sample configuration",function(){N();})])),P(t.ofArray([m.TxtIconNormal("autorenew","Refresh",function(){k.Create(M,f.FromWorker).RecreateOnClientEventsRunning(M,function(){return x.PanelContainerCreator();},f.ToWorker);})])),P(t.ofArray([m.TxtIconNormal("archive","Upload",function(){var Q;Q=k.Create(M,f.FromWorker);(new z.New()).Send("WebSharper.Community.Dashboard.Test:WebSharper.Community.Dashboard.Test.Server.SaveToFile:-1517660316",["Default",Q]);})])),P(t.ofArray([m.TxtIconNormal("unarchive","Download  and run on client",function(){(new z.New()).Sync("WebSharper.Community.Dashboard.Test:WebSharper.Community.Dashboard.Test.Server.LoadFromFile:960175932",["Default"]).RecreateOnClientEventsRunning(M,function(){return x.PanelContainerCreator();},f.ToWorker);})])),P(t.ofArray([m.TxtIconNormal("cloud_upload","Download and run on server",function(){O("Default");})]))]))]).OnAfterRender(function(){try{!H.IsNullOrWhiteSpace(K.ConfigurationName)?O(K.ConfigurationName):null;}catch(Q){null;}});};h.j$8=function(){return h._v$8?h._v$8:h._v$8=(J.DecodeUnion(void 0,"$",[[0,[["$0","Item",J.Id(),0]]]]))();};h.j$7=function(){return h._v$7?h._v$7:h._v$7=(J.DecodeUnion(F.Value,"$",[[0,[["$0","Item",J.Id(),0]]],[1,[["$0","Item",J.Id(),0]]],[2,[["$0","Item",J.Id(),0]]],[3,[["$0","Item",J.DecodeTuple([J.Id(),J.DecodeList(J.Id())]),0]]],[4,[["$0","Item",h.j$8,0]]]]))();};h.j$6=function(){return h._v$6?h._v$6:h._v$6=(J.DecodeRecord(F.Message,[["Key",J.Id(),0],["Time",J.DecodeDateTime(),0],["Value",h.j$7,0]]))();};h.j$5=function(){return h._v$5?h._v$5:h._v$5=(J.DecodeRecord(d.InPortData,[["Key",J.Id(),0],["Name",J.Id(),0],["Value",h.j$6,0],["CacheSize",J.Id(),0]]))();};h.j$9=function(){return h._v$9?h._v$9:h._v$9=(J.DecodeRecord(d.OutPort,[["Key",J.Id(),0],["Name",J.Id(),0]]))();};h.j$4=function(){return h._v$4?h._v$4:h._v$4=(J.DecodeRecord(void 0,[["WorkerName",J.Id(),0],["InPorts",J.DecodeList(h.j$5),0],["OutPorts",J.DecodeList(h.j$9),0]]))();};h.j$3=function(){return h._v$3?h._v$3:h._v$3=(J.DecodeRecord(s,[["GaugeWidgetData",h.j$4,0]]))();};h.j$10=function(){return h._v$10?h._v$10:h._v$10=(J.DecodeRecord(p.ButtonWidget,[["ButtonWidgetData",h.j$4,0]]))();};h.j$11=function(){return h._v$11?h._v$11:h._v$11=(J.DecodeRecord(r,[["ChartWidgetData",h.j$4,0]]))();};h.j$12=function(){return h._v$12?h._v$12:h._v$12=(J.DecodeRecord(q,[["TextBoxWidgetData",h.j$4,0]]))();};h.j$13=function(){return h._v$13?h._v$13:h._v$13=(J.DecodeRecord(n.DatabaseEvent,[["DatabaseEventData",h.j$4,0]]))();};h.j$14=function(){return h._v$14?h._v$14:h._v$14=(J.DecodeRecord(n.OpenWeatherEvent,[["OpenWeatherEventData",h.j$4,0]]))();};h.j$15=function(){return h._v$15?h._v$15:h._v$15=(J.DecodeRecord(n.ClockEvent,[["ClockEventData",h.j$4,0]]))();};h.j$16=function(){return h._v$16?h._v$16:h._v$16=(J.DecodeRecord(o,[["RandomEventData",h.j$4,0]]))();};h.j$2=function(){return h._v$2?h._v$2:h._v$2=(J.DecodeUnion(void 0,"$",[[0,[[null,null,h.j$16]]],[1,[[null,null,h.j$15]]],[2,[[null,null,h.j$14]]],[3,[[null,null,h.j$13]]],[4,[[null,null,h.j$12]]],[5,[[null,null,h.j$11]]],[6,[[null,null,h.j$10]]],[7,[[null,null,h.j$3]]]]))();};h.j$1=function(){return h._v$1?h._v$1:h._v$1=(J.DecodeUnion(void 0,"$",[[0,[["$0","Item",h.j$2,0]]]]))();};h.j$17=function(){return h._v$17?h._v$17:h._v$17=(J.DecodeRecord(void 0,[["Key",J.Id(),0],["Left",J.Id(),0],["Top",J.Id(),0],["Children",J.DecodeList(h.j$17),0]]))();};h.j$19=function(){return h._v$19?h._v$19:h._v$19=(J.DecodeRecord(void 0,[["RuleChain",J.DecodeList(J.Id()),0]]))();};h.j$18=function(){return h._v$18?h._v$18:h._v$18=(J.DecodeRecord(v,[["RuleContainer",J.DecodeList(h.j$19),0]]))();};h.j=function(){return h._v?h._v:h._v=(J.DecodeRecord(k,[["Events",J.DecodeList(J.DecodeTuple([J.Id(),J.DecodeList(J.DecodeTuple([J.Id(),h.j$1]))])),0],["Widgets",J.DecodeList(J.DecodeTuple([J.Id(),J.DecodeList(h.j$17),J.DecodeList(J.DecodeTuple([J.Id(),J.Id(),h.j$1]))])),0],["Rules",J.DecodeList(J.DecodeTuple([J.Id(),h.j$18])),0]]))();};}());
