(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A;a=window.WebSharper=window.WebSharper||{};b=a.Data=a.Data||{};c=b.Pervasives=b.Pervasives||{};d=b.WBRuntime=b.WBRuntime||{};e=d.WorldBankCountry=d.WorldBankCountry||{};f=d.WorldBankRuntime=d.WorldBankRuntime||{};g=window.FSharp=window.FSharp||{};h=g.Data=g.Data||{};i=h.Runtime=h.Runtime||{};j=i.WorldBank=i.WorldBank||{};k=j.Indicator=j.Indicator||{};l=b.JSRuntime=b.JSRuntime||{};m=b.TxtRuntime=b.TxtRuntime||{};n=i.IO=i.IO||{};o=a&&a.Strings;p=a&&a.Guid;q=a&&a.Concurrency;r=window.jQuery;s=a&&a.List;t=a&&a.JavaScript;u=t&&t.Pervasives;v=a&&a.Arrays;w=window.IntelliFactory;x=w&&w.Runtime;y=a&&a.Operators;z=window.Array;A=a&&a.Unchecked;c.randomFunctionName=function(){var B;return o.ReplaceChar((B=p.NewGuid(),window.String(B)).toLowerCase(),45,95);};e.New=function(B,C,D){return{Context:B,Code:C,Name:D};};f.AsyncGetIndicator=function(B,C){return q.FromContinuations(function(D,E){var F,G;F=c.randomFunctionName();r.ajax((G={},G.url=d.worldBankUrl(B.Context,s.ofArray(["countries",B.Code,"indicators",C]),s.ofArray([["date","1900:2050"],["format","jsonp"]])),G.dataType="jsonp",G.jsonp="prefix",G.jsonpCallback="jsonp"+F,G.error=function(H,I,J){return E(window.Error(I+J));},G.success=function(H){return D(u.NewFromSeq(v.choose(function(I){return I.value==null?null:{$:1,$0:[I.date,I.value]};},v.get(H,1)).slice().reverse()));},G));});};f.GetIndicators=window.id;f.GetCountry=function(B,C,D){return e.New(B,C,D);};d.worldBankUrl=function(B,C,D){var E;return B.serviceUrl+"/"+o.concat("",s.map(function(F){return"/"+window.encodeURIComponent(F);},C))+"?per_page=1000"+o.concat("",(E=function(F,G){return"&"+F+"="+window.encodeURIComponent(G);},s.map(function(F){return E(F[0],F[1]);},D)));};k=j.Indicator=x.Class({TryGetValueAt:function(B){var C;C=this[window.String(B)];return C==void 0?null:{$:1,$0:C};}},null,k);l.GetArrayChildByTypeTag=function(B,C,D){var E;E=l.GetArrayChildrenByTypeTag(B,C,D,window.id);return v.length(E)===1?v.get(E,0):y.FailWith("JSON mismatch: Expected single value, but found multiple.");};l.TryGetArrayChildByTypeTag=function(B,C,D,E){var F;F=l.GetArrayChildrenByTypeTag(B,C,D,E);return v.length(F)===1?{$:1,$0:v.get(F,0)}:v.length(F)===0?null:y.FailWith("JSON mismatch: Expected Array with single or no elements.");};l.TryGetValueByTypeTag=function(B,C,D,E){var F;F=l.matchTag(D,B);return F==null?null:{$:1,$0:E(F.$0)};};l.GetArrayChildrenByTypeTag=function(B,C,D,E){var F;return z.isArray(B)?v.map((F=window.id,function(G){return E(F(G));}),v.choose(function(G){return l.matchTag(D,G);},B)):y.FailWith("JSON mismatch: Expected Array node");};l.matchTag=function(B,C){var D;return C==null?null:A.Equals(typeof C,"boolean")&&B==="Boolean"?{$:1,$0:C}:A.Equals(typeof C,"number")&&B==="Number"?{$:1,$0:C}:A.Equals(typeof C,"string")&&B==="Number"?(D=1*C,window.isNaN(D)?null:{$:1,$0:D}):A.Equals(typeof C,"string")&&B==="String"?{$:1,$0:C}:z.isArray(C)&&B==="Array"?{$:1,$0:C}:A.Equals(typeof C,"object")&&B==="Record"?{$:1,$0:C}:null;};m.AsyncMap=function(B,C){var D;D=null;return q.Delay(function(){return q.Bind(B,function(E){return q.Return(C(E));});});};n.asyncReadTextAtRuntimeWithDesignTimeRules=function(B,C,D,E,F){return n.asyncReadTextAtRuntime(false,B,C,D,E,F);};n.asyncReadTextAtRuntime=function(B,C,D,E,F,G){var H;H=function(I,J){var K,L,M,N,O;K=(L=G.toLowerCase(),o.StartsWith(L,"jsonp|")?[G.substring(6),true]:o.StartsWith(L,"json|")?[G.substring(5),false]:[G,false]);M=(N={},N.dataType="json",N.success=function(P){return I(P);},N.error=function(P,Q,R){return J(window.Error(R));},N);K[1]?(O=c.randomFunctionName(),M.dataType="jsonp",M.jsonp="prefix",M.jsonpCallback="jsonp"+O):void 0;r.ajax(K[0],M);};return q.FromContinuations(function(I,J,K){return H.apply(null,[I,J,K]);});};}());
