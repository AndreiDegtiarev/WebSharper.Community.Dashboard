(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C;a=window.WebSharper=window.WebSharper||{};b=a.Community=a.Community||{};c=b.Dashboard=b.Dashboard||{};d=c.Test=c.Test||{};e=d.AppModel=d.AppModel||{};f=d.AppData=d.AppData||{};g=d.Client=d.Client||{};h=window.IntelliFactory;i=h&&h.Runtime;j=c&&c.Worker;k=c&&c.RandomRunner;l=c&&c.OpenWeatherRunner;m=c&&c.TextBoxRenderer;n=c&&c.ChartRenderer;o=a&&a.Operators;p=a&&a.List;q=c&&c.Dashboard;r=b&&b.Panel;s=r&&r.PanelContainer;t=r&&r.LayoutManagers;u=a&&a.UI;v=u&&u.Next;w=v&&v.AttrModule;x=c&&c.DshEditorData;y=v&&v.Var;z=v&&v.Doc;A=r&&r.Helper;B=a&&a.Remoting;C=B&&B.AjaxRemotingProvider;e=d.AppModel=i.Class({get_Worker:function(){var D,E,F,G;return this.$==1?(D=this.$0,j.Create(D).WithRunner(D)):this.$==2?(E=this.$0,j.Create(E).WithRenderer(E)):this.$==3?(F=this.$0,j.Create(F).WithRunner(F).WithRenderer(F)):(G=this.$0,j.Create(G).WithRunner(G));}},null,e);e.ToWorker=function(D){return e.FromDataContext(D).get_Worker();};e.FromWorker=function(D){var E;E=D.DataContext;return E instanceof c.RandomRunner?new e({$:0,$0:(k.get_FromPorts())(D)}):E instanceof c.OpenWeatherRunner?new e({$:1,$0:(l.get_FromPorts())(D)}):E instanceof c.TextBoxRenderer?new e({$:2,$0:(m.get_FromPorts())(D)}):E instanceof c.ChartRenderer?new e({$:3,$0:(n.get_FromPorts())(D)}):o.FailWith("AllTypes FromDataContext unknown type");};e.FromDataContext=function(D){return D instanceof k?new e({$:0,$0:D}):D instanceof l?new e({$:1,$0:D}):D instanceof m?new e({$:2,$0:D}):D instanceof n?new e({$:3,$0:D}):o.FailWith("AllTypes FromDataContext unknown type");};f=d.AppData=i.Class({Recreate:function(D){var E,F;D.Restore(this.PanelData,(E=function(G,H){return[G,H.get_Worker()];},p.map(function(G){return E(G[0],G[1]);},this.Events)),(F=function(G,H,I){return[G,H,I.get_Worker()];},p.map(function(G){return F(G[0],G[1],G[2]);},this.Widgets)),this.DshEditorData);}},null,f);f.get_CreateDashboard=function(){var D,E;function F(H){var I;E(H,(I=D.Factory,function(J){I.RegisterEvent(J);}));}function G(H){var I;E(H,(I=D.Factory,function(J){I.RegisterWidget(J);}));}D=q.Create(s.get_Create().WithLayoutManager(t.FloatingPanelLayoutManager(5)).WithWidth(800).WithHeight(420).WithAttributes([w.Style("border","1px solid white")]));E=function(H,I){return I(e.ToWorker(H));};F(l.Create("London",""));F(k.Create(50,5));G(m.get_Create());G(n.Create(300,100,50));return D;};f.Create=function(D){return f.New(p.map(function(E){return E.get_PanelData();},p.ofSeq(D.PanelContainer.PanelItems)),p.map(function(E){return[E.Worker.Key,e.FromWorker(E.Worker)];},p.ofSeq(D.Data.EventItems)),p.map(function(E){return[E.Widget.Key,E.Panel,e.FromWorker(E.Widget)];},p.ofSeq(D.Data.WidgetItems)),x.Create(D.Editor));};f.New=function(D,E,F,G){return new f({PanelData:D,Events:E,Widgets:F,DshEditorData:G});};g.Main=function(){var D,E;D=f.get_CreateDashboard();E=y.Create$1("D:\\Dashboard.cfg");return z.Element("div",[],[D.get_Render(),z.TextNode("File name"),z.Input([],E),A.TxtIconNormal("file_upload","Upload",function(){(new C.New()).Send("WebSharper.Community.Dashboard.Test:WebSharper.Community.Dashboard.Test.Server.SaveToFile:-1567987319",[E.c,f.Create(D)]);}),A.TxtIconNormal("file_download","Download",function(){(new C.New()).Sync("WebSharper.Community.Dashboard.Test:WebSharper.Community.Dashboard.Test.Server.LoadFromFile:-133840407",[E.c]).Recreate(D);})]);};}());
