(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE;a=window.WebSharper=window.WebSharper||{};b=a.Community=a.Community||{};c=b.Dashboard=b.Dashboard||{};d=c.MessageBus=c.MessageBus||{};e=d.Role=d.Role||{};f=d.Value=d.Value||{};g=d.Message=d.Message||{};h=d.ListenerInfo=d.ListenerInfo||{};i=d.AgentMessage=d.AgentMessage||{};j=d.AgentState=d.AgentState||{};k=window.StartupCode$WebSharper_Community_Dashboard$MessageBus=window.StartupCode$WebSharper_Community_Dashboard$MessageBus||{};l=c.InPort=c.InPort||{};m=c.OutPortType=c.OutPortType||{};n=c.OutPort=c.OutPort||{};o=c.Ports=c.Ports||{};p=c.Worker=c.Worker||{};q=c.Workers=c.Workers||{};r=c.RandomRunner=c.RandomRunner||{};s=c.OpenWeather=c.OpenWeather||{};t=s.Forecast=s.Forecast||{};u=c.OpenWeatherRunner=c.OpenWeatherRunner||{};v=c.DatabaseRunner=c.DatabaseRunner||{};w=c.ChartRunnerContext=c.ChartRunnerContext||{};x=c.ChartRenderer=c.ChartRenderer||{};y=c.TextBoxRenderer=c.TextBoxRenderer||{};z=c.ButtonRenderer=c.ButtonRenderer||{};A=c.RuleEntry=c.RuleEntry||{};B=c.RuleChain=c.RuleChain||{};C=c.RuleContainer=c.RuleContainer||{};D=c.WorkerItem=c.WorkerItem||{};E=c.Factory=c.Factory||{};F=c.WidgetItem=c.WidgetItem||{};G=c.EventsGroupItem=c.EventsGroupItem||{};H=c.DshData=c.DshData||{};I=c.EventsEditor=c.EventsEditor||{};J=c.RulesCellItem=c.RulesCellItem||{};K=c.RulesRowItem=c.RulesRowItem||{};L=c.RulesEditor=c.RulesEditor||{};M=c.SelectorItem=c.SelectorItem||{};N=c.SelectorGroup=c.SelectorGroup||{};O=c.WindowSelector=c.WindowSelector||{};P=c.Dashboard=c.Dashboard||{};Q=c.AppModelLib=c.AppModelLib||{};R=c.App=c.App||{};S=window.StartupCode$WebSharper_Community_Dashboard$AppModelLib=window.StartupCode$WebSharper_Community_Dashboard$AppModelLib||{};T=window.IntelliFactory;U=T&&T.Runtime;V=a&&a.Operators;W=b&&b.Panel;X=W&&W.Helper;Y=window.Date;Z=a&&a.List;_0=a&&a.Concurrency;_1=a&&a.Remoting;_2=_1&&_1.AjaxRemotingProvider;_3=a&&a.Control;_4=_3&&_3.MailboxProcessor;_5=a&&a.PrintfHelpers;_6=a&&a.Seq;_7=a&&a.UI;_8=_7&&_7.Next;_9=_8&&_8.Var;_=b&&b.PropertyGrid;$=_&&_.Properties;ba=a&&a.Guid;bb=a&&a.Unchecked;bc=_8&&_8.Doc;bd=a&&a.Random;be=window.Math;bf=window.console;bg=a&&a.Data;bh=bg&&bg.TxtRuntime;bi=window.FSharp;bj=bi&&bi.Data;bk=bj&&bj.Runtime;bl=bk&&bk.IO;bm=window.JSON;bn=a&&a.Arrays;bo=_8&&_8.View;bp=a&&a.Charting;bq=bp&&bp.Renderers;br=bq&&bq.ChartJs;bs=bp&&bp.Chart;bt=bp&&bp.Pervasives;bu=_8&&_8.AttrModule;bv=a&&a.Enumerator;bw=_8&&_8.Key;bx=_8&&_8.ListModel;by=a&&a.Option;bz=W&&W.PanelContainer;bA=W&&W.LayoutManagers;bB=W&&W.Panel;bC=W&&W.TitleButton;bD=W&&W.Dialog;bE=_&&_.PropertyGrid;e.Server={$:1};e.Client={$:0};f=d.Value=U.Class({get_AsNumber:function(){return this.$==0?this.$0:V.FailWith("MessageBus.Value: unexpected type");}},null,f);g.Create=function(bF){return g.New(X.UniqueKey(),Y.now(),bF);};g.New=function(bF,bG,bH){return{Key:bF,Time:bG,Value:bH};};h.Create=function(bF,bG,bH){return h.New(bF,bG,bH);};h.New=function(bF,bG,bH){return{Key:bF,Name:bG,CacheSize:bH};};i.Clear={$:4};j.get_empty=function(){return j.New(null,Z.T.Empty);};j.New=function(bF,bG){return{ServerCallback:bF,Listeners:bG};};d.RunServerRequests=function(){var bF;_0.Start((bF=null,_0.Delay(function(){return _0.While(function(){return true;},_0.Delay(function(){return _0.Bind(_0.Sleep(2*1000),function(){return _0.Bind(d.Agent().PostAndAsyncReply(function(bG){return{$:6,$0:bG};},null),function(bG){return _0.Bind((new _2.New()).Async("WebSharper.Community.Dashboard:WebSharper.Community.Dashboard.MessageBus.GetMessages:1550733476",[bG]),function(bH){Z.iter(function(bI){var bJ;bJ=d.Agent();bJ.mailbox.AddLast({$:1,$0:bI});bJ.resume();},bH);(d.Log())((function(bI){return function(bJ){return bI("Values from server requested messages received:"+window.String(bJ));};}(window.id))(bH.get_Length()));return _0.Zero();});});});}));})),null);};d.Agent=function(){k.$cctor();return k.Agent;};d.CreateString=function(bF){return d.CreateStrPair(X.UniqueKey(),bF);};d.CreateNumber=function(bF){return d.CreateNumPair(X.UniqueKey(),bF);};d.CreateBooleanPair=function(bF,bG){return d.CreateKeyValue(bF,new f({$:2,$0:bG}));};d.CreateStrPair=function(bF,bG){return d.CreateKeyValue(bF,new f({$:1,$0:bG}));};d.CreateNumPair=function(bF,bG){return d.CreateKeyValue(bF,new f({$:0,$0:bG}));};d.CreateKeyValue=function(bF,bG){return g.New(bF,Y.now(),bG);};d.Log=function(){k.$cctor();return k.Log;};d.set_Log=function(bF){k.$cctor();k.Log=bF;};d.Role$1=function(){k.$cctor();return k.Role;};d.set_Role=function(bF){k.$cctor();k.Role=bF;};k.$cctor=U.Cctor(function(){k.Role=e.Server;k.Log=function(){};k.Agent=_4.Start(function(bF){var bG,bH,bI,bJ;function bK(bL){var bM;bM=null;return _0.Delay(function(){return _0.Bind(bF.Receive(null),function(bN){var bO,bP,bQ,bR,bS,bT,bU;return bN.$==2?(bO=bN.$0[0],((d.Log())((function(bV){return function(bW){return bV("RegisterListener:"+_5.toSafe(bW));};}(window.id))(bO.Name)),bK(j.New(bL.ServerCallback,new Z.T({$:1,$0:[bO,bN.$0[2],Z.T.Empty],$1:bL.Listeners}))))):bN.$==3?bK(j.New({$:1,$0:bN.$0},bL.Listeners)):bN.$==5?(bP=bN.$0[0],(bN.$0[1](_6.fold(function(bV,bW){return!Z.contains(bW,bV)?new Z.T({$:1,$0:bW,$1:bV}):bV;},Z.T.Empty,Z.concat((bQ=function(bV,bW,bX){return bG(bP,bX);},Z.map(function(bV){return bQ(bV[0],bV[1],bV[2]);},bL.Listeners))))),bK(bL))):bN.$==6?(bR=(bS=function(bV,bW,bX){return bX.$==0?(new Y(0,0-1,0)).getTime():Z.maxBy(function(bY){return bY.Time;},bX).Time;},Z.map(function(bV){return bS(bV[0],bV[1],bV[2]);},bL.Listeners)),(bN.$0(bR.$==0?(new Y(0,0-1,0)).getTime():Z.max(bR)),bK(bL))):bN.$==1?bK(j.New(bL.ServerCallback,bJ(bN.$0,bL.Listeners))):bN.$==0?(bT=bN.$0,(bU=bL.ServerCallback,bU==null?void 0:bU.$0(bT),bK(j.New(bL.ServerCallback,bJ(bT,bL.Listeners))))):bK(j.get_empty());});});}bG=function(bL,bM){return _6.fold(function(bN,bO){return bO.Time>=bL?new Z.T({$:1,$0:bO,$1:bN}):bN;},Z.T.Empty,bM);};bH=function(bL,bM){return bL<bM.get_Length()?(Z.splitAt(bL,bM))[0]:bM;};bI=function(bL,bM,bN){return bL===1?Z.ofArray([bN]):bH(bL,new Z.T({$:1,$0:bN,$1:bM}));};bJ=function(bL,bM){var bN;bN=function(bO,bP,bQ){var bR;bR=window.Array.prototype.slice.call(arguments);return bO.Key===bL.Key?(bP(bL),[bO,bP,bI(bO.CacheSize,bQ,bL)]):bR;};return Z.map(function(bO){return bN(bO[0],bO[1],bO[2]);},bM);};return bK(j.get_empty());},null);k.$cctor=window.ignore;});l=c.InPort=U.Class({Equals:function(bF){return bF instanceof l&&this.Name===bF.Name;},get_BooleanValue:function(){var bF;bF=this;return this.ExtractPortBooleanValue(function(bG){return d.CreateBooleanPair(bF.Key,bG.c);});},get_BooleanVar:function(){return this.ExtractPortBooleanValue(window.id);},get_Boolean:function(){return this.ExtractPortBooleanValue(function(bF){return bF.c;});},ExtractPortBooleanValue:function(bF){var bG;bG=this.PortValue;return bG.$==2?bF(bG.$0[1]):V.FailWith("unexpected type");},get_StringValue:function(){var bF;bF=this;return this.ExtractPortStringValue(function(bG){return d.CreateStrPair(bF.Key,bG.c);});},get_StringVar:function(){return this.ExtractPortStringValue(window.id);},get_String:function(){return this.ExtractPortStringValue(function(bF){return bF.c;});},ExtractPortStringValue:function(bF){var bG;bG=this.PortValue;return bG.$==1?bF(bG.$0[1]):V.FailWith("unexpected type");},get_NumberValue:function(){var bF;bF=this;return this.ExtractPortNumberValue(function(bG){return d.CreateNumPair(bF.Key,bG.c);});},get_NumberVar:function(){return this.ExtractPortNumberValue(window.id);},get_Number:function(){return this.ExtractPortNumberValue(function(bF){return bF.c;});},ExtractPortNumberValue:function(bF){var bG;bG=this.PortValue;return bG.$==0?bF(bG.$0[1]):V.FailWith("unexpected type");},Receive:function(bF){var bG,bH,bI,bJ;bG=this.PortValue;bG.$==1?(bH=bF.Value,bH.$==1?_9.Set(bG.$0[1],bH.$0):V.FailWith("incompatible types")):bG.$==2?(bI=bF.Value,bI.$==2?_9.Set(bG.$0[1],bI.$0):V.FailWith("incompatible types")):(bJ=bF.Value,bJ.$==0?_9.Set(bG.$0[1],bJ.$0):V.FailWith("incompatible types"));},get_KeyValueVar:function(){var bF;bF=this.PortValue;return bF.$==1?bF.$0[0]:bF.$==2?bF.$0[0]:bF.$0[0];},get_Property:function(){var bF;bF=this.PortValue;return bF.$==1?$.string(this.Name,bF.$0[1]):bF.$==2?$.check(this.Name,bF.$0[1]):$["double"](this.Name,bF.$0[1]);},get_Clone:function(){var bF,bG;return l.New((bF=ba.NewGuid(),window.String(bF)),this.Name,(bG=this.PortValue,bG.$==1?{$:1,$0:[_9.Create$1(bG.$0[0].c),_9.Create$1(bG.$0[1].c)]}:bG.$==2?{$:2,$0:[_9.Create$1(bG.$0[0].c),_9.Create$1(bG.$0[1].c)]}:{$:0,$0:[_9.Create$1(bG.$0[0].c),_9.Create$1(bG.$0[1].c)]}),this.CacheSize);}},null,l);l.Create=function(bF,bG,bH,bI){return l.New(bF,bG,bH,bI);};l.New=function(bF,bG,bH,bI){return new l({Key:bF,Name:bG,PortValue:bH,CacheSize:bI});};m=c.OutPortType=U.Class({IsCompatible:function(bF){return this.$==1?bF.PortValue.$==1&&true:this.$==2?bF.PortValue.$==2&&true:bF.PortValue.$==0&&true;}},null,m);m.BooleanOutPort=new m({$:2});m.StringOutPort=new m({$:1});m.NumberOutPort=new m({$:0});n=c.OutPort=U.Class({Equals:function(bF){return bF instanceof n&&this.Name===bF.Name;},TriggerWithKey:function(bF){var bG;bG=d.Agent();bG.mailbox.AddLast({$:0,$0:bF});bG.resume();},Trigger:function(bF){var bG;bG=d.Agent();bG.mailbox.AddLast({$:0,$0:d.CreateKeyValue(this.Key,bF)});bG.resume();},get_Clone:function(){return n.New(X.UniqueKey(),this.Name,this.Type);}},null,n);n.CreateString=function(bF,bG){return n.Create(bF,bG,m.StringOutPort);};n.CreateNumber=function(bF,bG){return n.Create(bF,bG,m.NumberOutPort);};n.Create=function(bF,bG,bH){return n.New(bF,bG,bH);};n.New=function(bF,bG,bH){return new n({Key:bF,Name:bG,Type:bH});};o.Create=function(bF){var bG;return o.CreateWithCache((bG=function(bH,bI){return[bH,bI,1];},Z.map(function(bH){return bG(bH[0],bH[1]);},bF)));};o.CreateWithCache=function(bF){var bG;bG=function(bH,bI,bJ){var bK,bL,bM,bN;bK=bI.Value;return bK.$==1?(bL=bK.$0,l.Create(bI.Key,bH,{$:1,$0:[_9.Create$1(g.Create(new f({$:1,$0:bL}))),_9.Create$1(bL)]},bJ)):bK.$==2?(bM=bK.$0,l.Create(bI.Key,bH,{$:2,$0:[_9.Create$1(g.Create(new f({$:2,$0:bM}))),_9.Create$1(bM)]},bJ)):(bN=bK.$0,l.Create(bI.Key,bH,{$:0,$0:[_9.Create$1(g.Create(new f({$:0,$0:bN}))),_9.Create$1(bN)]},bJ));};return Z.map(function(bH){return bG(bH[0],bH[1],bH[2]);},bF);};p=c.Worker=U.Class({Equals:function(bF){return bF instanceof p&&bb.Equals(this.Name,bF.Name);},get_Properties:function(){return new Z.T({$:1,$0:$.string("Name",this.Name),$1:Z.map(function(bF){return bF.get_Property();},this.InPorts)});},get_Render:function(){var bF;bF=this.Renderer;return bF==null?bc.Empty():(bF.$0.WebSharper_Community_Dashboard_IRenderer$get_Render())(this);},get_CloneAndRun:function(){var bF,bG,bH;bF=_9.Create$1(this.Name.c);bG=Z.map(function(bI){return bI.get_Clone();},this.InPorts);bH=Z.map(function(bI){return bI.get_Clone();},this.OutPorts);return p.New(X.UniqueKey(),bF,bG,bH,this.Runner,this.Renderer,this.DataContext,null).WithStartRunner();},WithStartRunner:function(){var bF;bF=this.Runner;return bF==null?this:p.New(this.Key,this.Name,this.InPorts,this.OutPorts,this.Runner,this.Renderer,this.DataContext,(bF.$0.WebSharper_Community_Dashboard_IRunner$get_Run())(this));},WithRenderer:function(bF){return p.New(this.Key,this.Name,this.InPorts,this.OutPorts,this.Runner,{$:1,$0:bF},this.DataContext,this.RunnerContext);},WithRunner:function(bF){return p.New(this.Key,this.Name,this.InPorts,this.OutPorts,{$:1,$0:bF},this.Renderer,this.DataContext,this.RunnerContext);},WithKey:function(bF){return p.New(bF,this.Name,this.InPorts,this.OutPorts,this.Runner,this.Renderer,this.DataContext,this.RunnerContext);}},null,p);p.CreateWithRenderer=function(bF){return p.Create(bF).WithRenderer(bF);};p.CreateWithRunner=function(bF){return p.Create(bF).WithRunner(bF);};p.Create=function(bF){return p.New(X.UniqueKey(),_9.Create$1(bF.WebSharper_Community_Dashboard_IWorkerContext$get_Name()),bF.WebSharper_Community_Dashboard_IWorkerContext$get_InPorts(),bF.WebSharper_Community_Dashboard_IWorkerContext$get_OutPorts(),null,null,bF,null);};p.New=function(bF,bG,bH,bI,bJ,bK,bL,bM){return new p({Key:bF,Name:bG,InPorts:bH,OutPorts:bI,Runner:bJ,Renderer:bK,DataContext:bL,RunnerContext:bM});};q.allInPorts=function(bF){return q.allPorts(bF,function(bG){return bG.InPorts;});};q.allOutPorts=function(bF){return q.allPorts(bF,function(bG){return bG.OutPorts;});};q.allPorts=function(bF,bG){return Z.concat(Z.map(bG,bF));};r=c.RandomRunner=U.Class({WithMiddleValue:function(bF){return r.New(this.Name,d.CreateNumber(bF),this.Dispersion,this.OutPortKey);},WebSharper_Community_Dashboard_IRunner$get_Run:function(){return function(bF){var bG;new bd.New();_0.Start((bG=null,_0.Delay(function(){return _0.While(function(){return true;},_0.Delay(function(){return _0.Bind(_0.Sleep(600),function(){var bH,bI,bJ;bH=bF.InPorts.get_Item(1).get_Number();bI=bF.InPorts.get_Item(0).get_Number();bJ=be.random()*bH+bI;bF.OutPorts.get_Item(0).Trigger(new f({$:0,$0:bJ}));return _0.Zero();});}));})),null);return null;};},WebSharper_Community_Dashboard_IWorkerContext$get_OutPorts:function(){return Z.ofArray([n.CreateNumber(this.OutPortKey,"Random value")]);},WebSharper_Community_Dashboard_IWorkerContext$get_InPorts:function(){return o.Create(Z.ofArray([["Middle value",this.MiddleValue],["Dispersion",this.Dispersion]]));},WebSharper_Community_Dashboard_IWorkerContext$get_Name:function(){return this.Name;}},null,r);r.get_FromPorts=function(){return function(bF){return r.New(bF.Name.c,bF.InPorts.get_Item(0).get_NumberValue(),bF.InPorts.get_Item(1).get_NumberValue(),bF.OutPorts.get_Item(0).Key);};};r.Create=function(bF,bG){return r.New("Random",d.CreateNumber(bF),d.CreateNumber(bG),X.UniqueKey());};r.New=function(bF,bG,bH,bI){return new r({Name:bF,MiddleValue:bG,Dispersion:bH,OutPortKey:bI});};t.New=function(bF,bG,bH,bI,bJ){return{Title:bF,Description:bG,ImageUrl:bH,Temperature:bI,TemparatureMinMax:bJ};};s.get=function(bF,bG){var bH;bH=null;return _0.Delay(function(){var bI;bI=(((U.Curried3(function(bJ,bK,bL){return bJ("http://api.openweathermap.org/data/2.5/weather?q="+_5.toSafe(bK)+"&units=metric&appid="+_5.toSafe(bL));}))(window.id))(bG))(bF);bf.log("get key city "+bI);return _0.TryWith(_0.Delay(function(){return _0.Bind(bh.AsyncMap(bl.asyncReadTextAtRuntime(false,"C:\\Users\\Andrey\\Private\\VS_Projects\\WebSharper.Community.Dashboard\\WebSharper.Community.Dashboard","","JSON","",bI),function(bJ){return bb.Equals(typeof bJ,"string")?bm.parse(bJ):bJ;}),function(bJ){var bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6;bf.log("get key city 2");return _0.Return((bK=bn.tryHead(bJ.weather),bK==null?null:{$:1,$0:(bL=bK.$0,t.New((((U.Curried3(function(b7,b8,b9){return b7(_5.toSafe(b8)+", "+_5.toSafe(b9));}))(window.id))((bN=(bM="name",bM in bJ?{$:1,$0:bJ[bM]}:null),bN==null?null:bN.$0)))((bQ=(bO=bJ.sys,(bP="country",bP in bO?{$:1,$0:bO[bP]}:null)),bQ==null?null:bQ.$0)),(bS=(bR="main",bR in bL?{$:1,$0:bL[bR]}:null),bS==null?null:bS.$0),(function(b7){return function(b8){return b7("http://openweathermap.org/img/w/"+_5.toSafe(b8)+".png");};}(window.id))((bU=(bT="icon",bT in bL?{$:1,$0:bL[bT]}:null),bU==null?null:bU.$0)),(bV=(bW=bJ.main,(bX="temp",bX in bW?{$:1,$0:bW[bX]}:null)),(bY=bV==null?null:{$:1,$0:1*bV.$0},bY==null?null:bY.$0)),[(bZ=(b0=bJ.main,(b1="temp_min",b1 in b0?{$:1,$0:b0[b1]}:null)),(b2=bZ==null?null:{$:1,$0:1*bZ.$0},b2==null?null:b2.$0)),(b3=(b4=bJ.main,(b5="temp_max",b5 in b4?{$:1,$0:b4[b5]}:null)),(b6=b3==null?null:{$:1,$0:1*b3.$0},b6==null?null:b6.$0))]))}));});}),function(bJ){bf.log(bJ.message);return _0.Return(null);});});};u=c.OpenWeatherRunner=U.Class({WebSharper_Community_Dashboard_IRunner$get_Run:function(){return function(bF){var bG;_0.Start((bG=null,_0.Delay(function(){return _0.While(function(){return true;},_0.Delay(function(){var bH,bI,bJ;bH=bF.InPorts.get_Item(0);bI=bF.InPorts.get_Item(1);bJ=bF.OutPorts.get_Item(0);return _0.Bind(s.get(bI.get_String(),bH.get_String()),function(bK){return _0.Combine(bK==null?_0.Zero():(bf.log("Value generated:"+bK.$0.Title),bJ.Trigger(new f({$:0,$0:+bK.$0.Temperature})),_0.Zero()),_0.Delay(function(){return _0.Bind(_0.Sleep(1000*15),function(){return _0.Return(null);});}));});}));})),null);return null;};},WebSharper_Community_Dashboard_IWorkerContext$get_OutPorts:function(){return Z.ofArray([n.CreateNumber(this.OutPortKey,"Temperature")]);},WebSharper_Community_Dashboard_IWorkerContext$get_InPorts:function(){return o.Create(Z.ofArray([["City",this.OpenWeatherCity],["ApiKey",this.OpenWeatherApiKey]]));},WebSharper_Community_Dashboard_IWorkerContext$get_Name:function(){return this.Name;}},null,u);u.get_FromPorts=function(){return function(bF){return u.New(bF.Name.c,bF.InPorts.get_Item(0).get_StringValue(),bF.InPorts.get_Item(1).get_StringValue(),bF.OutPorts.get_Item(0).Key);};};u.Create=function(bF,bG){var bH;return u.New("OpenWeatherMap",d.CreateString(bF),d.CreateString(bG),(bH=ba.NewGuid(),window.String(bH)));};u.New=function(bF,bG,bH,bI){return new u({Name:bF,OpenWeatherCity:bG,OpenWeatherApiKey:bH,OutPortKey:bI});};v=c.DatabaseRunner=U.Class({WebSharper_Community_Dashboard_IRunner$get_Run:function(){return function(bF){bo.Sink(function(bG){var bH;bH=((((U.Curried(function(bI,bJ,bK,bL){return bI(_5.toSafe(bJ)+" "+_5.toSafe(bK)+" "+bL.toFixed(6));},4))(window.id))(bG.Key))(window.String(bG.Time)))(bG.Value.get_AsNumber());(new _2.New()).Send("WebSharper.Community.Dashboard:WebSharper.Community.Dashboard.ServerDatabase.WriteLine:2078881569",[bF.InPorts.get_Item(1).get_String(),bH]);bF.OutPorts.get_Item(0).TriggerWithKey(bG);},bF.InPorts.get_Item(0).get_KeyValueVar().v);return null;};},WebSharper_Community_Dashboard_IWorkerContext$get_OutPorts:function(){return Z.ofArray([n.CreateNumber(this.OutPortKey,"Number value")]);},WebSharper_Community_Dashboard_IWorkerContext$get_InPorts:function(){return o.Create(Z.ofArray([[" in Value",this.InValue],["Database name",this.DatabaseName]]));},WebSharper_Community_Dashboard_IWorkerContext$get_Name:function(){return this.Name;}},null,v);v.get_FromPorts=function(){return function(bF){var bG;bG=bF.InPorts.get_Item(0).get_NumberValue();return v.New(bF.Name.c,bF.InPorts.get_Item(1).get_StringValue(),bG,bF.OutPorts.get_Item(0).Key);};};v.get_Create=function(){return v.New("Database",d.CreateString("Database.txt"),d.CreateNumber(0),X.UniqueKey());};v.New=function(bF,bG,bH,bI){return new v({Name:bF,DatabaseName:bG,InValue:bH,OutPortKey:bI});};w.New=function(bF,bG){return{LineChart:bF,Queue:bG};};x=c.ChartRenderer=U.Class({WebSharper_Community_Dashboard_IRenderer$get_Render:function(){return function(bF){var bG,bH;bG=bF.InPorts.get_Item(3).get_Number()<<0;bH=bF.RunnerContext.$0;bo.Sink(function(bI){bH.Queue.push(bI);bH.Queue.length>bG?bH.Queue.shift():void 0;_6.iteri(function(bJ,bK){return bH.LineChart.__UpdateData(bJ,function(){return bK;});},bH.Queue);},bF.InPorts.get_Item(0).get_NumberVar().v);return br.Render$8(bF.RunnerContext.$0.LineChart,{$:1,$0:{$:0,$0:bF.InPorts.get_Item(1).get_Number()<<0,$1:bF.InPorts.get_Item(2).get_Number()<<0}},null,null);};},WebSharper_Community_Dashboard_IRunner$get_Run:function(){return function(bF){var bG,bH,bI,bJ;bG=bF.InPorts.get_Item(3).get_Number()<<0;bH=Z.ofSeq(_6.delay(function(){return _6.map(function(){return 0;},V.range(0,bG-1));}));bI=(bJ=[],(_6.iter(function(bK){bJ.push(bK);},bH),bJ));return{$:1,$0:w.New(bs.Line(bH).__WithFillColor(new bt.Color({$:2,$0:"white"})),bI)};};},WebSharper_Community_Dashboard_IWorkerContext$get_OutPorts:function(){return Z.T.Empty;},WebSharper_Community_Dashboard_IWorkerContext$get_InPorts:function(){return o.CreateWithCache(Z.ofArray([[" in Value",this.Number,this.ChartBufferSize.Value.get_AsNumber()<<0],["cx",this.Cx,1],["cy",this.Cy,1],["BufferSize",this.ChartBufferSize,1]]));},WebSharper_Community_Dashboard_IWorkerContext$get_Name:function(){return this.Name;}},null,x);x.get_FromPorts=function(){return function(bF){return x.New(bF.Name.c,bF.InPorts.get_Item(0).get_NumberValue(),bF.InPorts.get_Item(1).get_NumberValue(),bF.InPorts.get_Item(2).get_NumberValue(),bF.InPorts.get_Item(3).get_NumberValue());};};x.Create=function(bF,bG,bH){return x.New("Chart",d.CreateNumber(0),d.CreateNumber(bF),d.CreateNumber(bG),d.CreateNumber(bH));};x.New=function(bF,bG,bH,bI,bJ){return new x({Name:bF,Number:bG,Cx:bH,Cy:bI,ChartBufferSize:bJ});};y=c.TextBoxRenderer=U.Class({WebSharper_Community_Dashboard_IRenderer$get_Render:function(){return function(bF){var bG;bG=bo.Map(function(bH){var bI;bI=bH<<0;return window.String(bI);},bF.InPorts.get_Item(0).get_NumberVar().v);return bc.Element("div",[bu.Class("bigvalue")],[bc.TextView(bG)]);};},WebSharper_Community_Dashboard_IWorkerContext$get_OutPorts:function(){return Z.T.Empty;},WebSharper_Community_Dashboard_IWorkerContext$get_InPorts:function(){return o.Create(Z.ofArray([["in Value",this.TextBoxValue]]));},WebSharper_Community_Dashboard_IWorkerContext$get_Name:function(){return this.Name;}},null,y);y.get_FromPorts=function(){return function(bF){return y.New(bF.Name.c,bF.InPorts.get_Item(0).get_NumberValue());};};y.get_Create=function(){return y.New("Text",d.CreateNumber(0));};y.New=function(bF,bG){return new y({Name:bF,TextBoxValue:bG});};z=c.ButtonRenderer=U.Class({WebSharper_Community_Dashboard_IRenderer$get_Render:function(){return function(bF){return bc.ButtonView(bF.InPorts.get_Item(0).get_String(),[],bF.InPorts.get_Item(1).get_BooleanVar().v,function(bG){bF.OutPorts.get_Item(0).Trigger(new f({$:2,$0:bG}));});};},WebSharper_Community_Dashboard_IWorkerContext$get_OutPorts:function(){return Z.ofArray([n.CreateNumber(this.OutPortKey,"Button value")]);},WebSharper_Community_Dashboard_IWorkerContext$get_InPorts:function(){return o.Create(Z.ofArray([["Caption",this.ButtonName],["State",this.State]]));},WebSharper_Community_Dashboard_IWorkerContext$get_Name:function(){return this.Name;}},null,z);z.get_FromPorts=function(){return function(bF){return z.New(bF.Name.c,bF.InPorts.get_Item(0).get_StringValue(),bF.InPorts.get_Item(1).get_BooleanValue(),bF.OutPorts.get_Item(0).Key);};};z.get_Create=function(){return z.New("Button",d.CreateString("Button"),d.CreateNumber(0),X.UniqueKey());};z.New=function(bF,bG,bH,bI){return new z({Name:bF,ButtonName:bG,State:bH,OutPortKey:bI});};A.New=function(bF,bG,bH){return{InPortKey:bF,OutPortKey:bG,WorkerKey:bH};};B.New=function(bF){return{RuleChain:bF};};C=c.RuleContainer=U.Class({Reconnect:function(bF){var bG,bH,bI;bG=q.allOutPorts(bF);bH=q.allInPorts(bF);Z.iter(function(bJ){(d.Log())((((U.Curried3(function(bK,bL,bM){return bK(_5.toSafe(bL)+" "+_5.toSafe(bM));}))(window.id))(bJ.Name))(bJ.Key));},bH);bI=d.Agent();bI.mailbox.AddLast(i.Clear);bI.resume();Z.iter(function(bJ){var bK,bL,bM;bK=Z.ofSeq(bJ.RuleChain);bL=Z.ofSeq(V.range(1,bK.get_Length()-1));bM=bv.Get(bL);try{while(bM.MoveNext())(function(){var bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW;bN=bM.Current();bO=bK.get_Item(bN-1);bP=bK.get_Item(bN);bQ=_6.tryFind(function(bX){return bX.Key===bO.OutPortKey;},bG),bQ==null?null:{$:1,$0:(bR=bQ.$0,((d.Log())((function(bX){return function(bY){return bX("Found out port "+_5.toSafe(bY));};}(window.id))(bP.InPortKey)),bS=_6.tryFind(function(bX){return bX.Key===bP.InPortKey;},bH),bS==null?null:{$:1,$0:(bT=bS.$0,((d.Log())("Found int port"),bU=(bV=bT.PortValue,bV.$==1?g.Create(new f({$:1,$0:""})):bV.$==2?g.Create(new f({$:2,$0:false})):g.Create(new f({$:0,$0:0}))),bW=d.Agent(),bW.mailbox.AddLast({$:2,$0:[h.Create(bR.Key,bR.Name+"->"+bT.Name,bT.CacheSize),bU,function(bX){bT.Receive(bX);}]}),bW.resume()))}))};}());}finally{if("Dispose"in bM)bM.Dispose();}},Z.ofSeq(this.RuleContainer));}},null,C);C.New=function(bF){return new C({RuleContainer:bF});};D.Create=function(bF){return D.New(bw.Fresh(),bF);};D.New=function(bF,bG){return{Key:bF,Worker:bG};};E=c.Factory=U.Class({RegisterEvent:function(bF){this.EventItems.Append(D.Create(bF));},RegisterWidget:function(bF){this.WidgetItems.Append(D.Create(bF));}},null,E);E.get_Create=function(){return E.New(bx.Create(function(bF){return bF.Key;},Z.T.Empty),bx.Create(function(bF){return bF.Key;},Z.T.Empty));};E.New=function(bF,bG){return new E({EventItems:bF,WidgetItems:bG});};F.Create=function(bF,bG){return F.New(bw.Fresh(),bF,bG);};F.New=function(bF,bG,bH){return{Key:bF,Panel:bG,Widget:bH};};G.get_Create=function(){return G.New(bw.Fresh(),_9.Create$1("Events"),bx.Create(function(bF){return bF.Key;},Z.T.Empty));};G.New=function(bF,bG,bH){return{Key:bF,Name:bG,EventItems:bH};};H=c.DshData=U.Class({RegisterWidget:function(bF,bG,bH){var bI;bI=bH.WithKey(bF);this.WidgetItems.Append(F.Create(bG,bI));this.WorkItems.Append(D.Create(bI));},RegisterEventInGroup:function(bF,bG,bH){var bI;bI=D.Create(bH.WithKey(bF));bG.EventItems.Append(bI);this.WorkItems.Append(bI);},RegisterEvent:function(bF,bG){var bH;bH=D.Create(bG.WithKey(bF));this.EventItems.Append(bH);this.WorkItems.Append(bH);},get_Clear:function(){this.WorkItems.Clear();this.WidgetItems.Clear();this.EventItems.Clear();this.EventGroups.Clear();}},null,H);H.get_Create=function(){return H.New(bx.Create(function(bF){return bF.Key;},Z.T.Empty),bx.Create(function(bF){return bF.Key;},Z.T.Empty),bx.Create(function(bF){return bF.Key;},Z.T.Empty),bx.Create(function(bF){return bF.Key;},Z.T.Empty));};H.New=function(bF,bG,bH,bI){return new H({WorkItems:bF,WidgetItems:bG,EventItems:bH,EventGroups:bI});};I.Render=function(bF,bG){return bc.Element("table",[],[bc.ConvertBy(function(bH){return bH.Key;},function(bH){return bc.Element("tr",[],[bc.Element("i",X.AttrsClick(function(){bG.Edit(bH.Worker.get_Properties());}),[bc.TextView(bH.Worker.Name.v)])]);},bF.EventItems.v)]);};J=c.RulesCellItem=U.Class({Render:function(bF,bG){var bH,bI,bJ,bK,bL;bH=this;bo.Sink(function(bM){var bN;if(bM==null);else{bN=bM.$0;bf.log("Workitem selected");_9.Set(bH.OptInPort,Z.tryHead(bN.Worker.InPorts));_9.Set(bH.OptOutPort,Z.tryHead(bN.Worker.OutPorts));bG();}},this.OptWorker.v);bo.Sink(function(){bG();},this.OptInPort.v);bo.Sink(function(){bG();},this.OptOutPort.v);bI=(bJ=bo.Map(function(bM){var bN;return bM==null?Z.ofArray([null]):(bN=Z.map(function(bO){return{$:1,$0:bO};},bM.$0.Worker.InPorts),bN.get_Length()>0?bN:Z.ofArray([null]));},this.OptWorker.v),(bK=bo.Map(function(bM){var bN;return bM==null?Z.ofArray([null]):(bN=Z.map(function(bO){return{$:1,$0:bO};},bM.$0.Worker.OutPorts),bN.get_Length()>0?bN:Z.ofArray([null]));},this.OptWorker.v),(bL=bo.Map(function(bM){return new Z.T({$:1,$0:null,$1:Z.map(function(bN){return{$:1,$0:bN};},Z.ofSeq(bM))});},bF.WorkItems.v),bc.Element("table",[],[bc.Element("tr",[],[bc.Element("td",[],[bc.SelectDyn([bu.Class("form-control")],function(bM){return by.fold(function(bN,bO){return bO.Name;}," ",bM);},bJ,this.OptInPort)]),bc.Element("td",[],[bc.SelectDyn([bu.Class("form-control")],function(bM){return by.fold(function(bN,bO){return bO.Worker.Name.c;}," ",bM);},bL,this.OptWorker)]),bc.Element("td",[],[bc.SelectDyn([bu.Class("form-control")],function(bM){return by.fold(function(bN,bO){return bO.Name;}," ",bM);},bK,this.OptOutPort)])])]))));return bc.Element("td",[bu.Class("td DshEditorCell")],[bc.Element("div",[bu.Class("div DshEditorCell")],[bc.Element("table",[],[bc.Element("tr",[],[bc.Element("td",[],[bI])])])])]);}},null,J);J.get_Create=function(){return J.New(bw.Fresh(),_9.Create$1(null),_9.Create$1(null),_9.Create$1(null));};J.New=function(bF,bG,bH,bI){return new J({Key:bF,OptInPort:bG,OptWorker:bH,OptOutPort:bI});};K=c.RulesRowItem=U.Class({Render:function(bF,bG){var bH;bH=this;return bc.Element("tr",[],[bc.ConvertBy(function(bI){return bI.Key;},function(bI){return bI.Render(bF,bG);},this.CellItems.v),X.IconNormal("add",function(){bH.CellItems.Append(J.get_Create());})]);}},null,K);K.Create=function(bF){return K.New(bw.Fresh(),bx.Create(function(bG){return bG.Key;},bF));};K.New=function(bF,bG){return new K({Key:bF,CellItems:bG});};L=c.RulesEditor=U.Class({Render:function(bF){var bG,bH;bG=this;bH=function(){var bI;bI=Z.map(function(bJ){return bJ.Worker;},Z.ofSeq(bF.WorkItems));bG.get_CopyToRules().Reconnect(bI);};return bc.Element("table",[],[bc.ConvertBy(function(bI){return bI.Key;},function(bI){return bc.Element("tr",[],[bI.Render(bF,function(){bH();})]);},this.RowItems.v)]);},Restore:function(bF,bG){var bH,bI,bJ,bK;bH=this;this.RowItems.Clear();bI=Z.map(function(bL){return bL.Worker;},Z.ofSeq(bF.WorkItems));bJ=q.allOutPorts(bI);bK=q.allInPorts(bI);Z.iter(function(bL){var bM;bM=K.Create([]);Z.iter(function(bN){var bO;bO=J.get_Create();_9.Set(bO.OptWorker,_6.tryFind(function(bP){return bP.Worker.Key===bN.WorkerKey;},Z.ofSeq(bF.WorkItems)));_9.Set(bO.OptInPort,_6.tryFind(function(bP){return bP.Key===bN.InPortKey;},bK));_9.Set(bO.OptOutPort,_6.tryFind(function(bP){return bP.Key===bN.OutPortKey;},bJ));bM.CellItems.Append(bO);},bL.RuleChain);bH.RowItems.Append(bM);},bG.RuleContainer);bG.Reconnect(bI);},get_CopyToRules:function(){return C.New(Z.map(function(bF){return B.New(Z.map(function(bG){var bH,bI,bJ;return A.New((bH=bG.OptInPort.c,bH==null?"":bH.$0.Key),(bI=bG.OptOutPort.c,bI==null?"":bI.$0.Key),(bJ=bG.OptWorker.c,bJ==null?"":bJ.$0.Worker.Key));},Z.ofSeq(bF.CellItems)));},Z.ofSeq(this.RowItems)));}},null,L);L.get_Create=function(){return L.New(bx.Create(function(bF){return bF.Key;},Z.T.Empty));};L.New=function(bF){return new L({RowItems:bF});};M.Create=function(bF,bG){return M.New(bw.Fresh(),bF,bG);};M.New=function(bF,bG,bH){return{Key:bF,Name:bG,SelectorRenderer:bH};};N=c.SelectorGroup=U.Class({RenderMenu:function(bF,bG){var bH,bI,bJ,bK;bH=this;bI=(bJ=this.ChildCreatator,bJ==null?bc.Element("tr",[],[]):(bK=bJ.$0,bc.Element("tr",[],[bc.Element("td",[],[X.IconSmall("add",function(){var bL;bL=bK();bH.SelectorItems.Append(M.Create(bL[0],bL[1]));})])])));return bc.Element("table",[],[bc.ConvertBy(function(bL){return bL.Key;},function(bL){var bM;bM=bo.Map(function(bN){return bF+bN;},bL.Name.v);return bc.Element("tr",[],[bc.Element("td",[bu.DynamicStyle("Color",bo.Map(function(bN){return bb.Equals(bN.Key,bL.Key)?"#FB8C00":"#7D4600";},bG.v)),bu.Style("cursor","pointer"),bu.Handler("click",function(){return function(){return _9.Set(bG,bL);};})],[bc.TextView(bM)])]);},this.SelectorItems.v),bI]);}},null,N);N.Create=function(bF,bG,bH){var bI;bI=bx.Create(function(bJ){return bJ.Key;},Z.map(function(bJ){return M.Create(bJ[0],bJ[1]);},bG));return N.New(bw.Fresh(),_9.Create$1(bF),bI,bH);};N.New=function(bF,bG,bH,bI){return new N({Key:bF,Name:bG,SelectorItems:bH,ChildCreatator:bI});};O=c.WindowSelector=U.Class({get_RenderMenu:function(){var bF;bF=this;return this.SelectorGroups.get_Length()===1?Z.head(Z.ofSeq(this.SelectorGroups)).RenderMenu("",this.SelectedItem):bc.Element("div",[],[bc.ConvertBy(function(bG){return bG.Key;},function(bG){return bc.Element("div",[],[bc.TextView(bG.Name.v),bG.RenderMenu("    ",bF.SelectedItem)]);},this.SelectorGroups.v)]);},get_Render:function(){return bc.Element("div",[],[bc.BindView(function(bF){return bF.SelectorRenderer;},this.SelectedItem.v)]);},get_SelectedIndex:function(){var bF;bF=this;return _6.findIndex(function(bG){return bb.Equals(bG.Key,bF.SelectedItem.c.Key);},Z.concat(Z.map(function(bG){return Z.ofSeq(bG.SelectorItems);},Z.ofSeq(this.SelectorGroups))));},AppenGroup:function(bF,bG,bH){this.SelectorGroups.Append(N.Create(bF,bG,bH));}},null,O);O.Create=function(bF,bG,bH){var bI,bJ;bI=N.Create(bF,bG,bH);bJ=bx.Create(function(bK){return bK.Key;},Z.ofArray([bI]));return O.New(_9.Create$1(Z.head(Z.ofSeq(bI.SelectorItems))),bJ);};O.New=function(bF,bG){return new O({SelectedItem:bF,SelectorGroups:bG});};P=c.Dashboard=U.Class({get_Render:function(){var bF;bF=this;return bc.Element("div",[],[bc.Element("table",[],[bc.Element("tr",[],[bc.Element("td",[bu.Style("vertical-align","top")],[bc.Element("table",[],_6.concat([Z.ofArray([bc.Element("tr",[],[bc.Element("td",[],[X.IconNormal("dehaze",function(){})])]),bc.Element("tr",[],[bc.Element("td",[],[X.IconNormal("add",function(){var bG,bH,bI;bG=bF.EditorSelector.get_SelectedIndex();bG===1?(bH=Z.ofSeq(bF.Factory.EventItems),bI=_9.Create$1(Z.head(bH)),bF.Dialog.ShowDialog("Select source",bc.Element("div",[],[bc.Select([bu.Class("form-control")],function(bJ){return bJ.Worker.Name.c;},bH,bI)]),function(){var bJ;bJ=bI.c.Worker.get_CloneAndRun();bF.Data.RegisterEvent(X.UniqueKey(),bJ);})):bG===0?bF.CreatePanel("Panel",700,null):bG===2?bF.RulesEditor.RowItems.Append(K.Create([J.get_Create(),J.get_Create()])):void 0;})])])]),Z.ofArray([this.EditorSelector.get_RenderMenu()]),Z.ofArray([bc.Element("tr",[],[bc.Element("td",[],[])]),bc.Element("tr",[],[bc.Element("td",[],[this.PropertyGrid.get_Render()])])])]))]),bc.Element("td",[],[this.EditorSelector.get_Render()])])]),bc.Element("div",[],[this.Dialog.get_Render()])]);},Restore:function(bF,bG,bH,bI){var bJ,bK,bL;bJ=this;this.PanelContainer.PanelItems.Clear();this.Data.get_Clear();Z.iter(function(bM){var bN;bN=bJ.CreatePanel("Panel",700,{$:1,$0:bM.Key});_9.Set(bN.Left,bM.Left);_9.Set(bN.Top,bM.Top);},bF);bK=function(bM,bN){bJ.Data.RegisterEvent(bM,bN);};Z.iter(function(bM){return bK(bM[0],bM[1]);},bG);bf.log("Events restored");bL=function(bM,bN,bO){bJ.RegisterWidget(bM,bN,_6.find(function(bP){return bP.Key===bN;},Z.ofSeq(bJ.PanelContainer.PanelItems)).Children,bO.WithStartRunner());};Z.iter(function(bM){return bL(bM[0],bM[1],bM[2]);},bH);bf.log("Widgets restored");this.RulesEditor.Restore(this.Data,bI);bf.log("Connectors restored");},Store:function(bF){return[Z.map(function(bG){return bG.get_PanelData();},Z.ofSeq(this.PanelContainer.PanelItems)),Z.map(function(bG){return[bG.Worker.Key,bF(bG.Worker)];},Z.ofSeq(this.Data.EventItems)),Z.map(function(bG){return[bG.Widget.Key,bG.Panel,bF(bG.Widget)];},Z.ofSeq(this.Data.WidgetItems)),this.RulesEditor.get_CopyToRules()];},CreatePanel:function(bF,bG,bH){var bI,bJ,bK,bL,bM,bN;bI=this;bc.ConvertBy(this.Data.WidgetItems.key,function(bO){return bc.Element("div",[],[bc.TextView(bO.Widget.Name.v)]);},this.Data.WidgetItems.v);bJ=(bK=(bL=ba.NewGuid(),window.String(bL)),bH==null?bK:bH.$0);bM=bz.get_Create().WithLayoutManager(bA.StackPanelLayoutManager()).WithAttributes([bu.Style("border","1px solid white"),bu.Style("display","flex")]);bN=bB.get_Create().WithKey(bJ).WithPannelAttrs([bu.Style("Width",window.String(bG)+"px"),bu.Style("position","absolute")]).WithTitleContent(bc.TextNode(bF)).WithTitleButtons(Z.ofArray([bC.New("add",function(bO){var bP,bQ;bP=Z.ofSeq(bI.Factory.WidgetItems);bQ=_9.Create$1(Z.head(bP));bI.Dialog.ShowDialog("Select widget",bc.Element("div",[],[bc.Select([bu.Class("form-control")],function(bR){return bR.Worker.Name.c;},bP,bQ)]),function(){bf.log("Dialog.IsOK");bI.RegisterWidget(X.UniqueKey(),bO.Key,bO.Children,bQ.c.Worker.get_CloneAndRun());});}),bC.New("edit",function(bO){bf.log("Edit");bI.PropertyGrid.Edit(Z.concat(Z.map(function(bP){return bP.Widget.get_Properties();},Z.filter(function(bP){return bP.Panel===bO.Key;},Z.ofSeq(bI.Data.WidgetItems)))));}),bC.New("clear",function(bO){bI.PanelContainer.PanelItems.Remove(bI.PanelContainer.FindPanelItem(bO));})])).WithChildPanelContainer(bM);this.PanelContainer.AddPanel(bN);return bN;},RegisterWidget:function(bF,bG,bH,bI){this.Data.RegisterWidget(bF,bG,bI);bH.AddPanel(bB.get_Create().WithTitle(false).WithPanelContent(bI.get_Render()));}},null,P);P.Create=function(bF){var bG,bH,bI,bJ,bK;bG=bD.get_Create();bH=L.get_Create();bI=H.get_Create();bJ=bE.get_Create();bK=O.Create("root",Z.ofArray([[_9.Create$1("Board"),bF.get_Render()],[_9.Create$1("Events"),I.Render(bI,bJ)],[_9.Create$1("Rules"),bH.Render(bI)]]),null);return P.New(E.get_Create(),bI,bF,bH,bJ,bG,bK);};P.New=function(bF,bG,bH,bI,bJ,bK,bL){return new P({Factory:bF,Data:bG,PanelContainer:bH,RulesEditor:bI,PropertyGrid:bJ,Dialog:bK,EditorSelector:bL});};Q=c.AppModelLib=U.Class({get_Worker:function(){var bF;return this.$==1?p.CreateWithRunner(this.$0):this.$==2?p.CreateWithRunner(this.$0):this.$==3?p.CreateWithRenderer(this.$0):this.$==4?(bF=this.$0,p.Create(bF).WithRunner(bF).WithRenderer(bF)):this.$==5?p.CreateWithRenderer(this.$0):p.CreateWithRunner(this.$0);}},null,Q);Q.FromWorker=function(bF){var bG;bG=bF.DataContext;return bG instanceof r?{$:1,$0:new Q({$:0,$0:(r.get_FromPorts())(bF)})}:bG instanceof u?{$:1,$0:new Q({$:1,$0:(u.get_FromPorts())(bF)})}:bG instanceof v?{$:1,$0:new Q({$:2,$0:(v.get_FromPorts())(bF)})}:bG instanceof y?{$:1,$0:new Q({$:3,$0:(y.get_FromPorts())(bF)})}:bG instanceof x?{$:1,$0:new Q({$:4,$0:(x.get_FromPorts())(bF)})}:bG instanceof z?{$:1,$0:new Q({$:5,$0:(z.get_FromPorts())(bF)})}:null;};Q.FromDataContext=function(bF){return bF instanceof r?{$:1,$0:new Q({$:0,$0:bF})}:bF instanceof u?{$:1,$0:new Q({$:1,$0:bF})}:bF instanceof v?{$:1,$0:new Q({$:2,$0:bF})}:bF instanceof y?{$:1,$0:new Q({$:3,$0:bF})}:bF instanceof x?{$:1,$0:new Q({$:4,$0:bF})}:bF instanceof z?{$:1,$0:new Q({$:5,$0:bF})}:null;};R.CreateDashboard=function(){S.$cctor();return S.CreateDashboard;};R.Register=function(bF){var bG;function bH(bJ){var bK;bG((bK=bF.Factory,function(bL){bK.RegisterEvent(bL);}),bJ);}function bI(bJ){var bK;bG((bK=bF.Factory,function(bL){bK.RegisterWidget(bL);}),bJ);}bG=function(bJ,bK){var bL;bL=Q.FromDataContext(bK),bL==null?null:{$:1,$0:bJ(bL.$0.get_Worker())};};bH(u.Create("London",""));bH(r.Create(50,5));bH(v.get_Create());bI(y.get_Create());bI(x.Create(300,100,50));bI(z.get_Create());};S.$cctor=U.Cctor(function(){var bF;S.CreateDashboard=(bF=P.Create(bz.get_Create().WithLayoutManager(bA.FloatingPanelLayoutManager(5)).WithWidth(800).WithHeight(420).WithAttributes([bu.Style("border","1px solid white")])),(R.Register(bF),bF));S.$cctor=window.ignore;});}());
