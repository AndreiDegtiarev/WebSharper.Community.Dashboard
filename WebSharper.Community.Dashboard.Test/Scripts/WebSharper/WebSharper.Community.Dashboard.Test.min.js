(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J;a=window;b=a.WebSharper=a.WebSharper||{};c=b.Community=b.Community||{};d=c.Dashboard=c.Dashboard||{};e=d.Test=d.Test||{};f=e.AppModel=e.AppModel||{};g=e.Client=e.Client||{};h=a.WebSharper$Community$Dashboard$Test_JsonDecoder=a.WebSharper$Community$Dashboard$Test_JsonDecoder||{};i=d&&d.AppModelLib;j=d&&d.RuleEntry;k=d&&d.AppData;l=c&&c.Panel;m=l&&l.Helper;n=d&&d.Events;o=n&&n.RandomEvent;p=d&&d.Widgets;q=p&&p.TextBoxWidget;r=p&&p.ChartWidget;s=b&&b.List;t=l&&l.PanelData;u=d&&d.RuleContainer;v=d&&d.RuleChain;w=d&&d.App;x=b&&b.Remoting;y=x&&x.AjaxRemotingProvider;z=b&&b.UI;A=z&&z.Next;B=A&&A.Doc;C=d&&d.Environment;D=a.console;E=d&&d.MessageBus;F=A&&A.Var;G=a.JSON;H=b&&b.Strings;I=b&&b.Json;J=I&&I.Provider;f.FromWorker=function(K){var L;L=i.FromWorker(K);return L==null?null:{$:1,$0:{$:0,$0:L.$0}};};f.ToWorker=function(K){return i.ToWorker(K.$0);};g.Main=function(K){var L,M,N;function O(){var R,S,T,U,V,W;function X(Y){var Z;Z=f.ToWorker(Y);return[[Z.Key,R,Y],j.New(Z.InPorts.get_Item(0).get_Key(),"",Z.Key)];}k.Create(N,f.FromWorker);R=m.UniqueKey();S={$:0,$0:{$:0,$0:o.get_Create()}};T=f.ToWorker(S);U=X({$:0,$0:{$:4,$0:q.get_Create()}});V=X({$:0,$0:{$:5,$0:r.get_Create()}});W=s.ofArray([t.Create(R,0,0,s.T.Empty)]);k.New(s.ofArray([["main",s.ofArray([[T.Key,S]])]]),s.ofArray([["main",W,s.ofArray([U[0],V[0]])]]),s.ofArray([["main",u.New(s.ofArray([v.New(s.ofArray([j.New(T.InPorts.get_Item(0).get_Key(),T.OutPorts.get_Item(0).Key,T.Key),U[1]])),v.New(s.ofArray([j.New(T.InPorts.get_Item(0).get_Key(),T.OutPorts.get_Item(0).Key,T.Key),V[1]]))]))]])).RecreateOnClientEventsRunning(N,function(){return w.PanelContainerCreator();},f.ToWorker);}function P(R){(new y.New()).Send("WebSharper.Community.Dashboard.Test:WebSharper.Community.Dashboard.Test.Server.RecreateOnServer:1430973847",[(new y.New()).Sync("WebSharper.Community.Dashboard.Test:WebSharper.Community.Dashboard.Test.Server.LoadFromFile:960175932",[R])]);L("Server recreated");}function Q(R){return B.Element("td",[],R);}C.set_Log(function(R){D.log(R);});E.RunServerRequests();L=C.Log();M=F.Create$1("Dashboard");N=w.CreateDashboard();C.set_UpdateConfiguration(function(R){try{(h.j())(G.parse(R)).RecreateOnClientEventsNotRunning(N,function(){return w.PanelContainerCreator();},f.ToWorker);L("Configuration updated");}catch(S){L(S.message);}});return B.Element("div",[],[N.Render(B.Element("div",[],[Q(s.ofArray([m.TxtIconNormal("build","Sample configuration",function(){O();})])),Q(s.ofArray([B.TextNode("File name"),B.Input([],M)])),Q(s.ofArray([m.TxtIconNormal("archive","Upload",function(){(new y.New()).Send("WebSharper.Community.Dashboard.Test:WebSharper.Community.Dashboard.Test.Server.SaveToFile:-1517660316",[M.c,k.Create(N,f.FromWorker)]);})])),Q(s.ofArray([m.TxtIconNormal("unarchive","Download  and run on client",function(){(new y.New()).Sync("WebSharper.Community.Dashboard.Test:WebSharper.Community.Dashboard.Test.Server.LoadFromFile:960175932",[M.c]).RecreateOnClientEventsRunning(N,function(){return w.PanelContainerCreator();},f.ToWorker);})])),Q(s.ofArray([m.TxtIconNormal("cloud_upload","Download and run on server",function(){P(M.c);})]))]))]).OnAfterRender(function(){try{!H.IsNullOrWhiteSpace(K.ConfigurationName)?P(K.ConfigurationName):null;}catch(R){null;}});};h.j$8=function(){return h._v$8?h._v$8:h._v$8=(J.DecodeUnion(void 0,"$",[[0,[["$0","Item",J.Id(),0]]]]))();};h.j$7=function(){return h._v$7?h._v$7:h._v$7=(J.DecodeUnion(E.Value,"$",[[0,[["$0","Item",J.Id(),0]]],[1,[["$0","Item",J.Id(),0]]],[2,[["$0","Item",J.Id(),0]]],[3,[["$0","Item",J.DecodeTuple([J.Id(),J.DecodeList(J.Id())]),0]]],[4,[["$0","Item",h.j$8,0]]]]))();};h.j$6=function(){return h._v$6?h._v$6:h._v$6=(J.DecodeRecord(E.Message,[["Key",J.Id(),0],["Time",J.DecodeDateTime(),0],["Value",h.j$7,0]]))();};h.j$5=function(){return h._v$5?h._v$5:h._v$5=(J.DecodeRecord(d.InPortData,[["Key",J.Id(),0],["Name",J.Id(),0],["Value",h.j$6,0],["CacheSize",J.Id(),0]]))();};h.j$9=function(){return h._v$9?h._v$9:h._v$9=(J.DecodeRecord(d.OutPort,[["Key",J.Id(),0],["Name",J.Id(),0]]))();};h.j$4=function(){return h._v$4?h._v$4:h._v$4=(J.DecodeRecord(void 0,[["WorkerName",J.Id(),0],["InPorts",J.DecodeList(h.j$5),0],["OutPorts",J.DecodeList(h.j$9),0]]))();};h.j$3=function(){return h._v$3?h._v$3:h._v$3=(J.DecodeRecord(p.ButtonWidget,[["ButtonWidgetData",h.j$4,0]]))();};h.j$10=function(){return h._v$10?h._v$10:h._v$10=(J.DecodeRecord(r,[["ChartWidgetData",h.j$4,0]]))();};h.j$11=function(){return h._v$11?h._v$11:h._v$11=(J.DecodeRecord(q,[["TextBoxWidgetData",h.j$4,0]]))();};h.j$12=function(){return h._v$12?h._v$12:h._v$12=(J.DecodeRecord(n.DatabaseEvent,[["DatabaseEventData",h.j$4,0]]))();};h.j$13=function(){return h._v$13?h._v$13:h._v$13=(J.DecodeRecord(n.OpenWeatherEvent,[["OpenWeatherEventData",h.j$4,0]]))();};h.j$14=function(){return h._v$14?h._v$14:h._v$14=(J.DecodeRecord(n.ClockEvent,[["ClockEventData",h.j$4,0]]))();};h.j$15=function(){return h._v$15?h._v$15:h._v$15=(J.DecodeRecord(o,[["RandomEventData",h.j$4,0]]))();};h.j$2=function(){return h._v$2?h._v$2:h._v$2=(J.DecodeUnion(void 0,"$",[[0,[[null,null,h.j$15]]],[1,[[null,null,h.j$14]]],[2,[[null,null,h.j$13]]],[3,[[null,null,h.j$12]]],[4,[[null,null,h.j$11]]],[5,[[null,null,h.j$10]]],[6,[[null,null,h.j$3]]]]))();};h.j$1=function(){return h._v$1?h._v$1:h._v$1=(J.DecodeUnion(void 0,"$",[[0,[["$0","Item",h.j$2,0]]]]))();};h.j$16=function(){return h._v$16?h._v$16:h._v$16=(J.DecodeRecord(void 0,[["Key",J.Id(),0],["Left",J.Id(),0],["Top",J.Id(),0],["Children",J.DecodeList(h.j$16),0]]))();};h.j$18=function(){return h._v$18?h._v$18:h._v$18=(J.DecodeRecord(void 0,[["RuleChain",J.DecodeList(J.Id()),0]]))();};h.j$17=function(){return h._v$17?h._v$17:h._v$17=(J.DecodeRecord(u,[["RuleContainer",J.DecodeList(h.j$18),0]]))();};h.j=function(){return h._v?h._v:h._v=(J.DecodeRecord(k,[["Events",J.DecodeList(J.DecodeTuple([J.Id(),J.DecodeList(J.DecodeTuple([J.Id(),h.j$1]))])),0],["Widgets",J.DecodeList(J.DecodeTuple([J.Id(),J.DecodeList(h.j$16),J.DecodeList(J.DecodeTuple([J.Id(),J.Id(),h.j$1]))])),0],["Rules",J.DecodeList(J.DecodeTuple([J.Id(),h.j$17])),0]]))();};}());
