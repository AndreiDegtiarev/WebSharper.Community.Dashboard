(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;a=window;b=a.WebSharper=a.WebSharper||{};c=b.Data=b.Data||{};d=c.Pervasives=c.Pervasives||{};e=c.WBRuntime=c.WBRuntime||{};f=e.WorldBankCountry=e.WorldBankCountry||{};g=e.WorldBankRuntime=e.WorldBankRuntime||{};h=a.FSharp=a.FSharp||{};i=h.Data=h.Data||{};j=i.Runtime=i.Runtime||{};k=j.WorldBank=j.WorldBank||{};l=k.Indicator=k.Indicator||{};m=c.JSRuntime=c.JSRuntime||{};n=c.TxtRuntime=c.TxtRuntime||{};o=j.IO=j.IO||{};p=b&&b.Guid;q=b&&b.Strings;r=b&&b.Concurrency;s=b&&b.List;t=b&&b.Arrays;u=b&&b.JavaScript;v=u&&u.Pervasives;w=a.IntelliFactory;x=w&&w.Runtime;y=b&&b.Operators;z=b&&b.Unchecked;d.randomFunctionName=function(){var A,B;A=(B=p.NewGuid(),a.String(B)).toLowerCase();return q.ReplaceChar(A,45,95);};f.New=function(A,B,C){return{Context:A,Code:B,Name:C};};g.AsyncGetIndicator=function(A,B){return r.FromContinuations(function(C,D){var E,F,G,H,I,J,K;E=d.randomFunctionName();F=A.Context;G=A.Code;H=e.worldBankUrl(F,s.ofArray(["countries",G,"indicators",B]),s.ofArray([["date","1900:2050"],["format","jsonp"]]));I=(J=(K={},K.url=H,K.dataType="jsonp",K.jsonp="prefix",K.jsonpCallback="jsonp"+E,K.error=function(L,M,N){return D(a.Error(M+N));},K.success=function(L){var M,N;M=(N=function(O){return O.value==null?null:{$:1,$0:[O.date,O.value]};},function(O){return t.choose(N,O);}(t.get(L,1))).slice().reverse();return C(v.NewFromSeq(M));},K),a.jQuery.ajax(J));});};g.GetIndicators=a.id;g.GetCountry=function(A,B,C){return f.New(A,B,C);};e.worldBankUrl=function(A,B,C){var D,E,F,G;return A.serviceUrl+"/"+(D=(E=function(H){return"/"+a.encodeURIComponent(H);},function(H){return s.map(E,H);}(B)),q.concat("",D))+"?per_page=1000"+(F=(G=function(H,I){return"&"+H+"="+a.encodeURIComponent(I);},function(H){return s.map(function(I){return G(I[0],I[1]);},H);}(C)),q.concat("",F));};l=k.Indicator=x.Class({TryGetValueAt:function(A){var B;B=this[a.String(A)];return B==void 0?null:{$:1,$0:B};}},null,l);m.GetArrayChildByTypeTag=function(A,B,C){var D;D=m.GetArrayChildrenByTypeTag(A,B,C,a.id);return t.length(D)===1?t.get(D,0):y.FailWith("JSON mismatch: Expected single value, but found multiple.");};m.TryGetArrayChildByTypeTag=function(A,B,C,D){var E;E=m.GetArrayChildrenByTypeTag(A,B,C,D);return t.length(E)===1?{$:1,$0:t.get(E,0)}:t.length(E)===0?null:y.FailWith("JSON mismatch: Expected Array with single or no elements.");};m.TryGetValueByTypeTag=function(A,B,C,D){var E,F;E=(F=a.id,function(G){return D(F(G));});return function(G){return G==null?null:{$:1,$0:E(G.$0)};}(m.matchTag(C,A));};m.GetArrayChildrenByTypeTag=function(A,B,C,D){var E,F,G;return a.Array.isArray(A)?(E=(F=a.id,function(H){return D(F(H));}),function(H){return t.map(E,H);}((G=function(H){return m.matchTag(C,H);},function(H){return t.choose(G,H);}(A)))):y.FailWith("JSON mismatch: Expected Array node");};m.matchTag=function(A,B){var C;return B==null?null:(z.Equals(typeof B,"boolean")?A==="Boolean":false)?{$:1,$0:B}:(z.Equals(typeof B,"number")?A==="Number":false)?{$:1,$0:B}:(z.Equals(typeof B,"string")?A==="Number":false)?(C=1*B,a.isNaN(C)?null:{$:1,$0:C}):(z.Equals(typeof B,"string")?A==="String":false)?{$:1,$0:B}:(a.Array.isArray(B)?A==="Array":false)?{$:1,$0:B}:(z.Equals(typeof B,"object")?A==="Record":false)?{$:1,$0:B}:null;};n.AsyncMap=function(A,B){return r.Delay(function(){return r.Bind(A,function(C){return r.Return(B(C));});});};o.asyncReadTextAtRuntimeWithDesignTimeRules=function(A,B,C,D,E){return o.asyncReadTextAtRuntime(false,A,B,C,D,E);};o.asyncReadTextAtRuntime=function(A,B,C,D,E,F){var G;G=function(H,I){var J,K,L,M,N,O,P,Q;J=(K=F.toLowerCase(),q.StartsWith(K,"jsonp|")?[F.substring(6),true]:q.StartsWith(K,"json|")?[F.substring(5),false]:[F,false]);L=J[0];M=J[1];N=(O={},O.dataType="json",O.success=function(R){return H(R);},O.error=function(R,S,T){return I(a.Error(T));},O);M?(P=d.randomFunctionName(),N.dataType="jsonp",N.jsonp="prefix",N.jsonpCallback="jsonp"+P):void 0;Q=a.jQuery.ajax(L,N);};return r.FromContinuations(function(H,I,J){return G.apply(null,[H,I,J]);});};}());
