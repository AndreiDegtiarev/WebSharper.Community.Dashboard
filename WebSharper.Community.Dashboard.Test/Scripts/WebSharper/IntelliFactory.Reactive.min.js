(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;a=window;b=a.IntelliFactory=a.IntelliFactory||{};c=b.Reactive=b.Reactive||{};d=c.Disposable=c.Disposable||{};e=c.Observer=c.Observer||{};f=c.Observable=c.Observable||{};g=c.HotStream=c.HotStream||{};h=a.WebSharper;i=h&&h.Obj;j=c.Reactive=c.Reactive||{};k=j.Reactive=j.Reactive||{};l=a.StartupCode$IntelliFactory_Reactive$Reactive=a.StartupCode$IntelliFactory_Reactive$Reactive||{};m=b&&b.Runtime;n=h&&h.Control;o=n&&n.FSharpEvent;p=h&&h.Util;q=h&&h.List;r=h&&h.Collections;s=r&&r.Dictionary;t=h&&h.Seq;d=c.Disposable=m.Class({Dispose:function(){this.Dispose$1();}},null,d);d.New$1=function(u){return d.New(u);};d.New=function(u){return new d({Dispose:u});};e=c.Observer=m.Class({OnError:a.ignore,OnCompleted:function(){this.OnCompleted$1();},OnNext:function(u){this.OnNext$1(u);}},null,e);e.New$1=function(u,v){return e.New(u,v);};e.New=function(u,v){return new e({OnNext:u,OnCompleted:v});};f=c.Observable=m.Class({SubscribeWith:function(u,v){return this.OnSubscribe(e.New$1(u,v));},Subscribe:function(u){return this.OnSubscribe(u);}},null,f);f.New$1=function(u){return f.New(u);};f.New=function(u){return new f({OnSubscribe:u});};g=c.HotStream=m.Class({Trigger:function(u){this.Latest[0]={$:1,$0:u};this.Event.event.Trigger(u);},Subscribe:function(u){this.Latest[0]!=null?u.OnNext(this.Latest[0].$0):void 0;return this.Event.event.Subscribe(u);}},null,g);g.New$1=function(u){return g.New([{$:1,$0:u}],new o.New());};g.New$2=function(){return g.New([null],new o.New());};g.New=function(u,v){return new g({Latest:u,Event:v});};k=j.Reactive=m.Class({Sequence:function(u){return j.Sequence(u);},Drop:function(u,v){return j.Drop(u,v);},Aggregate:function(u,v,w){return j.Aggregate(u,v,function(x,y){return(w(x))(y);});},Heat:function(u){return j.Heat(u);},CombineLatest:function(u,v,w){return j.CombineLatest(u,v,function(x,y){return(w(x))(y);});},CollectLatest:function(u){return j.CollectLatest(u);},SelectMany:function(u){return j.SelectMany(u);},Switch:function(u){return j.Switch(u);},Merge:function(u,v){return j.Merge(u,v);},Concat:function(u,v){return j.Concat(u,v);},Where:function(u,v){return j.Where(u,v);},Choose:function(u,v){return j.Choose(u,v);},Select:function(u,v){return j.Select(u,v);},Never:function(){return j.Never();},Return:function(u){return j.Return(u);}},i,k);k.New=m.Ctor(function(){},k);j.Default=function(){l.$cctor();return l.Default;};j.Heat=function(u){var v;v=g.New$2();u.Subscribe(p.observer(function(w){v.Trigger(w);}));return v;};j.Sequence=function(u){function v(w){return w.$==1?j.CombineLatest(w.$0,v(w.$1),function(x,y){return new q.T({$:1,$0:x,$1:y});}):j.Return(q.T.Empty);}return j.Select(v(q.ofSeq(u)),a.id);};j.CollectLatest=function(u){return f.New$1(function(v){var w,x;w=new s.New$5();x=[0];return u.Subscribe(p.observer(function(y){var z;x[0]++;z=x[0];y.Subscribe(p.observer(function(A){w.set_Item(z,A);v.OnNext(t.delay(function(){return t.map(function(B){return B.V;},w);}));}));}));});};j.Aggregate=function(u,v,w){return f.New$1(function(x){var y;y=[v];return u.Subscribe(p.observer(function(z){y[0]=w(y[0],z);x.OnNext(y[0]);}));});};j.SelectMany=function(u){return f.New$1(function(v){var w,x;w=[a.ignore];x=u.Subscribe(p.observer(function(y){var z;z=y.Subscribe(p.observer(function(A){v.OnNext(A);}));w[0]=function(){w[0]();z.Dispose();};}));return d.New$1(function(){w[0]();x.Dispose();});});};j.Switch=function(u){return f.New$1(function(v){var w,x;w=[0];x=[null];return u.Subscribe(p.observer(function(y){var z;w[0]++;x[0]!=null?x[0].$0.Dispose():void 0;z=w[0];x[0]={$:1,$0:y.Subscribe(p.observer(function(A){if(z===w[0])v.OnNext(A);}))};}));});};j.CombineLast=function(u,v,w){return f.New$1(function(x){var y,z,A,B;function C(){if(y.length>0&&z.length>0)x.OnNext(w(y.shift(),z.shift()));}y=[];z=[];A=u.Subscribe(e.New$1(function(D){y.push(D);C();},a.ignore));B=v.Subscribe(e.New$1(function(D){z.push(D);C();},a.ignore));return d.New$1(function(){A.Dispose();B.Dispose();});});};j.CombineLatest=function(u,v,w){return f.New$1(function(x){var y,z,A,B;function C(){var D,E;D=y[0];E=z[0];D!=null&&D.$==1?E!=null&&E.$==1?x.OnNext(w(D.$0,E.$0)):void 0:void 0;}y=[null];z=[null];A=u.Subscribe(e.New$1(function(D){y[0]={$:1,$0:D};C();},a.ignore));B=v.Subscribe(e.New$1(function(D){z[0]={$:1,$0:D};C();},a.ignore));return d.New$1(function(){A.Dispose();B.Dispose();});});};j.Range=function(u,v){return f.New$1(function(w){var x,y;for(x=u,y=u+v;x<=y;x++)w.OnNext(x);return d.New$1(a.ignore);});};j.Concat=function(u,v){return f.New$1(function(w){var x,y;x=[null];y=u.Subscribe(e.New$1(function(z){w.OnNext(z);},function(){x[0]={$:1,$0:v.Subscribe(w)};}));return d.New$1(function(){x[0]!=null?x[0].$0.Dispose():void 0;y.Dispose();});});};j.Merge=function(u,v){return f.New$1(function(w){var x,y,z,A;x=[false];y=[false];z=u.Subscribe(e.New$1(function(B){w.OnNext(B);},function(){x[0]=true;x[0]&&y[0]?w.OnCompleted():void 0;}));A=v.Subscribe(e.New$1(function(B){w.OnNext(B);},function(){y[0]=true;x[0]&&y[0]?w.OnCompleted():void 0;}));return d.New$1(function(){z.Dispose();A.Dispose();});});};j.Drop=function(u,v){return f.New$1(function(w){var x;x=[0];return u.Subscribe(p.observer(function(y){x[0]++;x[0]>v?w.OnNext(y):void 0;}));});};j.Choose=function(u,v){return f.New$1(function(w){return u.Subscribe(p.observer(function(x){var y;y=v(x);y==null?void 0:w.OnNext(y.$0);}));});};j.Where=function(u,v){return f.New$1(function(w){return u.Subscribe(p.observer(function(x){if(v(x))w.OnNext(x);}));});};j.Select=function(u,v){return f.New$1(function(w){return u.Subscribe(p.observer(function(x){w.OnNext(v(x));}));});};j.Never=function(){return f.New$1(function(){return d.New$1(a.ignore);});};j.Return=function(u){return f.New$1(function(v){v.OnNext(u);v.OnCompleted();return d.New$1(a.ignore);});};l.$cctor=function(){l.$cctor=a.ignore;l.Default=new k.New();};}());
